/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.20 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/* Zepto v1.2.0-8-g0ed31f9 - zepto event ajax form detect fx fx_methods assets data deferred touch gesture callbacks - zeptojs.com/license */

// Zepto.cookie plugin
// 
// Copyright (c) 2010, 2012 
// @author Klaus Hartl (stilbuero.de)
// @author Daniel Lacy (daniellacy.com)
// 
// Dual licensed under the MIT and GPL licenses:
// http://www.opensource.org/licenses/mit-license.php
// http://www.gnu.org/licenses/gpl.html

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,n){if(e){var t;for(t=0;t<e.length&&(!e[t]||!n(e[t],t,e));t+=1);}}function eachReverse(e,n){if(e){var t;for(t=e.length-1;t>-1&&(!e[t]||!n(e[t],t,e));t-=1);}}function hasProp(e,n){return hasOwn.call(e,n)}function getOwn(e,n){return hasProp(e,n)&&e[n]}function eachProp(e,n){var t;for(t in e)if(hasProp(e,t)&&n(e[t],t))break}function mixin(e,n,t,i){return n&&eachProp(n,function(n,o){!t&&hasProp(e,o)||(!i||"object"!=typeof n||!n||isArray(n)||isFunction(n)||n instanceof RegExp?e[o]=n:(e[o]||(e[o]={}),mixin(e[o],n,t,i)))}),e}function bind(e,n){return function(){return n.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var n=global;return each(e.split("."),function(e){n=n[e]}),n}function makeError(e,n,t,i){var o=new Error(n+"\nhttp://requirejs.org/docs/errors.html#"+e);return o.requireType=e,o.requireModules=i,t&&(o.originalError=t),o}function newContext(e){function n(e){var n,t;for(n=0;n<e.length;n++)if("."===(t=e[n]))e.splice(n,1),n-=1;else if(".."===t){if(0===n||1===n&&".."===e[2]||".."===e[n-1])continue;n>0&&(e.splice(n-1,2),n-=2)}}function t(e,t,i){var o,a,r,s,c,d,l,u,p,f,m,h=t&&t.split("/"),g=C.map,v=g&&g["*"];if(e&&(e=e.split("/"),d=e.length-1,C.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(m=h.slice(0,h.length-1),e=m.concat(e)),n(e),e=e.join("/")),i&&g&&(h||v)){a=e.split("/");e:for(r=a.length;r>0;r-=1){if(c=a.slice(0,r).join("/"),h)for(s=h.length;s>0;s-=1)if((o=getOwn(g,h.slice(0,s).join("/")))&&(o=getOwn(o,c))){l=o,u=r;break e}!p&&v&&getOwn(v,c)&&(p=getOwn(v,c),f=r)}!l&&p&&(l=p,u=f),l&&(a.splice(0,u,l),e=a.join("/"))}return getOwn(C.pkgs,e)||e}function i(e){isBrowser&&each(scripts(),function(n){if(n.getAttribute("data-requiremodule")===e&&n.getAttribute("data-requirecontext")===w.contextName)return n.parentNode.removeChild(n),!0})}function o(e){var n=getOwn(C.paths,e);if(n&&isArray(n)&&n.length>1)return n.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0}function a(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function r(e,n,i,o){var r,s,c,d,l=null,u=n?n.name:null,p=e,f=!0,m="";return e||(f=!1,e="_@r"+(D+=1)),d=a(e),l=d[0],e=d[1],l&&(l=t(l,u,o),s=getOwn(O,l)),e&&(l?m=s&&s.normalize?s.normalize(e,function(e){return t(e,u,o)}):-1===e.indexOf("!")?t(e,u,o):e:(m=t(e,u,o),d=a(m),l=d[0],m=d[1],i=!0,r=w.nameToUrl(m))),c=!l||s||i?"":"_unnormalized"+(T+=1),{prefix:l,name:m,parentMap:n,unnormalized:!!c,url:r,originalName:p,isDefine:f,id:(l?l+"!"+m:m)+c}}function s(e){var n=e.id,t=getOwn(k,n);return t||(t=k[n]=new w.Module(e)),t}function c(e,n,t){var i=e.id,o=getOwn(k,i);!hasProp(O,i)||o&&!o.defineEmitComplete?(o=s(e),o.error&&"error"===n?t(o.error):o.on(n,t)):"defined"===n&&t(O[i])}function d(e,n){var t=e.requireModules,i=!1;n?n(e):(each(t,function(n){var t=getOwn(k,n);t&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||req.onError(e))}function l(){globalDefQueue.length&&(each(globalDefQueue,function(e){var n=e[0];"string"==typeof n&&(w.defQueueMap[n]=!0),j.push(e)}),globalDefQueue=[])}function u(e){delete k[e],delete A[e]}function p(e,n,t){var i=e.map.id;e.error?e.emit("error",e.error):(n[i]=!0,each(e.depMaps,function(i,o){var a=i.id,r=getOwn(k,a);!r||e.depMatched[o]||t[a]||(getOwn(n,a)?(e.defineDep(o,O[a]),e.check()):p(r,n,t))}),t[i]=!0)}function f(){var e,n,t=1e3*C.waitSeconds,a=t&&w.startTime+t<(new Date).getTime(),r=[],s=[],c=!1,l=!0;if(!y){if(y=!0,eachProp(A,function(e){var t=e.map,d=t.id;if(e.enabled&&(t.isDefine||s.push(e),!e.error))if(!e.inited&&a)o(d)?(n=!0,c=!0):(r.push(d),i(d));else if(!e.inited&&e.fetched&&t.isDefine&&(c=!0,!t.prefix))return l=!1}),a&&r.length)return e=makeError("timeout","Load timeout for modules: "+r,null,r),e.contextName=w.contextName,d(e);l&&each(s,function(e){p(e,{},{})}),a&&!n||!c||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,f()},50)),y=!1}}function m(e){hasProp(O,e[0])||s(r(e[0],null,!0)).init(e[1],e[2])}function h(e,n,t,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,n):e.removeEventListener(t,n,!1)}function g(e){var n=e.currentTarget||e.srcElement;return h(n,w.onScriptLoad,"load","onreadystatechange"),h(n,w.onScriptError,"error"),{node:n,id:n&&n.getAttribute("data-requiremodule")}}function v(){var e;for(l();j.length;){if(e=j.shift(),null===e[0])return d(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}w.defQueueMap={}}var y,_,w,b,x,C={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},A={},E={},j=[],O={},S={},N={},D=1,T=1;return b={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?O[e.map.id]=e.exports:e.exports=O[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(C.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},_=function(e){this.events=getOwn(E,e.id)||{},this.map=e,this.shim=getOwn(C.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},_.prototype={init:function(e,n,t,i){i=i||{},this.inited||(this.factory=n,t?this.on("error",t):this.events.error&&(t=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=t,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,n){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=n)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;S[e]||(S[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,n,t=this.map.id,i=this.depExports,o=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=w.execCb(t,a,i,o)}catch(n){e=n}else o=w.execCb(t,a,i,o);if(this.map.isDefine&&void 0===o&&(n=this.module,n?o=n.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else o=a;this.exports=o,this.map.isDefine&&!this.ignore&&(O[t]=o,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),u(t),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(w.defQueueMap,t)||this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,i=r(e.prefix);this.depMaps.push(i),c(i,"defined",bind(this,function(i){var o,a,l,p=getOwn(N,this.map.id),f=this.map.name,m=this.map.parentMap?this.map.parentMap.name:null,h=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(f=i.normalize(f,function(e){return t(e,m,!0)})||""),a=r(e.prefix+"!"+f,this.map.parentMap),c(a,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((l=getOwn(k,a.id))&&(this.depMaps.push(a),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):p?(this.map.url=w.nameToUrl(p),void this.load()):(o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],eachProp(k,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&u(e.map.id)}),d(e)}),o.fromText=bind(this,function(t,i){var a=e.name,c=r(a),l=useInteractive;i&&(t=i),l&&(useInteractive=!1),s(c),hasProp(C.config,n)&&(C.config[a]=C.config[n]);try{req.exec(t)}catch(e){return d(makeError("fromtexteval","fromText eval for "+n+" failed: "+e,e,[n]))}l&&(useInteractive=!0),this.depMaps.push(c),w.completeLoad(a),h([a],o)}),void i.load(e.name,h,o,C))})),w.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){A[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,n){var t,i,o;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,o=getOwn(b,e.id))return void(this.depExports[n]=o(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(n,e),this.check())})),this.errback?c(e,"error",bind(this,this.errback)):this.events.error&&c(e,"error",bind(this,function(e){this.emit("error",e)}))}t=e.id,i=k[t],hasProp(b,t)||!i||i.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var n=getOwn(k,e.id);n&&!n.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,n){var t=this.events[e];t||(t=this.events[e]=[]),t.push(n)},emit:function(e,n){each(this.events[e],function(e){e(n)}),"error"===e&&delete this.events[e]}},w={config:C,contextName:e,registry:k,defined:O,urlFetched:S,defQueue:j,defQueueMap:{},Module:_,makeModuleMap:r,nextTick:req.nextTick,onError:d,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var n=C.shim,t={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,n){t[n]?(C[n]||(C[n]={}),mixin(C[n],e,!0,!0)):C[n]=e}),e.bundles&&eachProp(e.bundles,function(e,n){each(e,function(e){e!==n&&(N[e]=n)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),n[t]=e}),C.shim=n),e.packages&&each(e.packages,function(e){var n,t;e="string"==typeof e?{name:e}:e,t=e.name,n=e.location,n&&(C.paths[t]=e.location),C.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,n){e.inited||e.map.unnormalized||(e.map=r(n,null,!0))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function n(){var n;return e.init&&(n=e.init.apply(global,arguments)),n||e.exports&&getGlobal(e.exports)}return n},makeRequire:function(n,o){function a(t,i,c){var l,u,p;return o.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof t?isFunction(i)?d(makeError("requireargs","Invalid require call"),c):n&&hasProp(b,t)?b[t](k[n.id]):req.get?req.get(w,t,n,a):(u=r(t,n,!1,!0),l=u.id,hasProp(O,l)?O[l]:d(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(v(),w.nextTick(function(){v(),p=s(r(null,n)),p.skipMap=o.skipMap,p.init(t,i,c,{enabled:!0}),f()}),a)}return o=o||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,o=e.lastIndexOf("."),a=e.split("/")[0],r="."===a||".."===a;return-1!==o&&(!r||o>1)&&(i=e.substring(o,e.length),e=e.substring(0,o)),w.nameToUrl(t(e,n&&n.id,!0),i,!0)},defined:function(e){return hasProp(O,r(e,n,!1,!0).id)},specified:function(e){return e=r(e,n,!1,!0).id,hasProp(O,e)||hasProp(k,e)}}),n||(a.undef=function(e){l();var t=r(e,n,!0),o=getOwn(k,e);o.undefed=!0,i(e),delete O[e],delete S[t.url],delete E[e],eachReverse(j,function(n,t){n[0]===e&&j.splice(t,1)}),delete w.defQueueMap[e],o&&(o.events.defined&&(E[e]=o.events),u(e))}),a},enable:function(e){getOwn(k,e.id)&&s(e).enable()},completeLoad:function(e){var n,t,i,a=getOwn(C.shim,e)||{},r=a.exports;for(l();j.length;){if(t=j.shift(),null===t[0]){if(t[0]=e,n)break;n=!0}else t[0]===e&&(n=!0);m(t)}if(w.defQueueMap={},i=getOwn(k,e),!n&&!hasProp(O,e)&&i&&!i.inited){if(!(!C.enforceDefine||r&&getGlobal(r)))return o(e)?void 0:d(makeError("nodefine","No define call for "+e,null,[e]));m([e,a.deps||[],a.exportsFn])}f()},nameToUrl:function(e,n,t){var i,o,a,r,s,c,d,l=getOwn(C.pkgs,e);if(l&&(e=l),d=getOwn(N,e))return w.nameToUrl(d,n,t);if(req.jsExtRegExp.test(e))s=e+(n||"");else{for(i=C.paths,o=e.split("/"),a=o.length;a>0;a-=1)if(r=o.slice(0,a).join("/"),c=getOwn(i,r)){isArray(c)&&(c=c[0]),o.splice(0,a,c);break}s=o.join("/"),s+=n||(/^data\:|\?/.test(s)||t?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+s}return C.urlArgs?s+(-1===s.indexOf("?")?"?":"&")+C.urlArgs:s},load:function(e,n){req.load(w,e,n)},execCb:function(e,n,t,i){return n.apply(i,t)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var n=g(e);w.completeLoad(n.id)}},onScriptError:function(e){var n=g(e);if(!o(n.id))return d(makeError("scripterror","Script error for: "+n.id,e,[n.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,n,t,i){var o,a,r=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(n)?(e=n,n=t,t=i):e=[]),a&&a.context&&(r=a.context),o=getOwn(contexts,r),o||(o=contexts[r]=req.s.newContext(r)),a&&o.configure(a),o.require(e,n,t)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var n=contexts[defContextName];return n.require[e].apply(n,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,n,t){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,n,t){var i,o=e&&e.config||{};if(isBrowser)return i=req.createNode(o,n,t),o.onNodeCreated&&o.onNodeCreated(i,o,n,t),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",n),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=t,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(t),e.completeLoad(n)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+n+" at "+t,i,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var i,o;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),o=contexts[i.getAttribute("data-requirecontext")]),o?(o.defQueue.push([e,n,t]),o.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requirejs",function(){}),function(e,n){"function"==typeof define&&define.amd?define("zepto",[],function(){return n(e)}):n(e)}(this,function(e){var n=function(){function n(e){return null==e?String(e):Y[Z.call(e)]||"object"}function t(e){return"function"==n(e)}function i(e){return null!=e&&e==e.window}function o(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function a(e){return"object"==n(e)}function r(e){return a(e)&&!i(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){var n=!!e&&"length"in e&&e.length,t=A.type(e);return"function"!=t&&!i(e)&&("array"==t||0===n||"number"==typeof n&&n>0&&n-1 in e)}function c(e){return D.call(e,function(e){return null!=e})}function d(e){return e.length>0?A.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in M?M[e]:M[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,n){return"number"!=typeof n||q[l(e)]?n:n+"px"}function f(e){var n,t;return I[e]||(n=P.createElement(e),P.body.appendChild(n),t=getComputedStyle(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"==t&&(t="block"),I[e]=t),I[e]}function m(e){return"children"in e?T.call(e.children):A.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,n){var t,i=e?e.length:0;for(t=0;i>t;t++)this[t]=e[t];this.length=i,this.selector=n||""}function g(e,n,t){for(k in n)t&&(r(n[k])||$(n[k]))?(r(n[k])&&!r(e[k])&&(e[k]={}),$(n[k])&&!$(e[k])&&(e[k]=[]),g(e[k],n[k],t)):n[k]!==C&&(e[k]=n[k])}function v(e,n){return null==n?A(e):A(e).filter(n)}function y(e,n,i,o){return t(n)?n.call(e,i,o):n}function _(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function w(e,n){var t=e.className||"",i=t&&t.baseVal!==C;return n===C?i?t.baseVal:t:void(i?t.baseVal=n:e.className=n)}function b(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?A.parseJSON(e):e):e}catch(n){return e}}function x(e,n){n(e);for(var t=0,i=e.childNodes.length;i>t;t++)x(e.childNodes[t],n)}var C,k,A,E,j,O,S=[],N=S.concat,D=S.filter,T=S.slice,P=e.document,I={},M={},q={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,W=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,H=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],G=["after","prepend","before","append"],F=P.createElement("table"),z=P.createElement("tr"),V={tr:P.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:z,th:z,"*":P.createElement("div")},X=/^[\w-]*$/,Y={},Z=Y.toString,Q={},J=P.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},$=Array.isArray||function(e){return e instanceof Array};return Q.matches=function(e,n){if(!n||!e||1!==e.nodeType)return!1;var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(t)return t.call(e,n);var i,o=e.parentNode,a=!o;return a&&(o=J).appendChild(e),i=~Q.qsa(o,n).indexOf(e),a&&J.removeChild(e),i},j=function(e){return e.replace(/-+(.)?/g,function(e,n){return n?n.toUpperCase():""})},O=function(e){return D.call(e,function(n,t){return e.indexOf(n)==t})},Q.fragment=function(e,n,t){var i,o,a;return L.test(e)&&(i=A(P.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(W,"<$1></$2>")),n===C&&(n=R.test(e)&&RegExp.$1),n in V||(n="*"),a=V[n],a.innerHTML=""+e,i=A.each(T.call(a.childNodes),function(){a.removeChild(this)})),r(t)&&(o=A(i),A.each(t,function(e,n){U.indexOf(e)>-1?o[e](n):o.attr(e,n)})),i},Q.Z=function(e,n){return new h(e,n)},Q.isZ=function(e){return e instanceof Q.Z},Q.init=function(e,n){var i;if(!e)return Q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&R.test(e))i=Q.fragment(e,RegExp.$1,n),e=null;else{if(n!==C)return A(n).find(e);i=Q.qsa(P,e)}else{if(t(e))return A(P).ready(e);if(Q.isZ(e))return e;if($(e))i=c(e);else if(a(e))i=[e],e=null;else if(R.test(e))i=Q.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==C)return A(n).find(e);i=Q.qsa(P,e)}}return Q.Z(i,e)},A=function(e,n){return Q.init(e,n)},A.extend=function(e){var n,t=T.call(arguments,1);return"boolean"==typeof e&&(n=e,e=t.shift()),t.forEach(function(t){g(e,t,n)}),e},Q.qsa=function(e,n){var t,i="#"==n[0],o=!i&&"."==n[0],a=i||o?n.slice(1):n,r=X.test(a);return e.getElementById&&r&&i?(t=e.getElementById(a))?[t]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:T.call(r&&!i&&e.getElementsByClassName?o?e.getElementsByClassName(a):e.getElementsByTagName(n):e.querySelectorAll(n))},A.contains=P.documentElement.contains?function(e,n){return e!==n&&e.contains(n)}:function(e,n){for(;n&&(n=n.parentNode);)if(n===e)return!0;return!1},A.type=n,A.isFunction=t,A.isWindow=i,A.isArray=$,A.isPlainObject=r,A.isEmptyObject=function(e){var n;for(n in e)return!1;return!0},A.isNumeric=function(e){var n=Number(e),t=typeof e;return null!=e&&"boolean"!=t&&("string"!=t||e.length)&&!isNaN(n)&&isFinite(n)||!1},A.inArray=function(e,n,t){return S.indexOf.call(n,e,t)},A.camelCase=j,A.trim=function(e){return null==e?"":String.prototype.trim.call(e)},A.uuid=0,A.support={},A.expr={},A.noop=function(){},A.map=function(e,n){var t,i,o,a=[];if(s(e))for(i=0;i<e.length;i++)null!=(t=n(e[i],i))&&a.push(t);else for(o in e)null!=(t=n(e[o],o))&&a.push(t);return d(a)},A.each=function(e,n){var t,i;if(s(e)){for(t=0;t<e.length;t++)if(!1===n.call(e[t],t,e[t]))return e}else for(i in e)if(!1===n.call(e[i],i,e[i]))return e;return e},A.grep=function(e,n){return D.call(e,n)},e.JSON&&(A.parseJSON=JSON.parse),A.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,n){Y["[object "+n+"]"]=n.toLowerCase()}),A.fn={constructor:Q.Z,length:0,forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,splice:S.splice,indexOf:S.indexOf,concat:function(){var e,n,t=[];for(e=0;e<arguments.length;e++)n=arguments[e],t[e]=Q.isZ(n)?n.toArray():n;return N.apply(Q.isZ(this)?this.toArray():this,t)},map:function(e){return A(A.map(this,function(n,t){return e.call(n,t,n)}))},slice:function(){return A(T.apply(this,arguments))},ready:function(n){if("complete"===P.readyState||"loading"!==P.readyState&&!P.documentElement.doScroll)setTimeout(function(){n(A)},0);else{var t=function(){P.removeEventListener("DOMContentLoaded",t,!1),e.removeEventListener("load",t,!1),n(A)};P.addEventListener("DOMContentLoaded",t,!1),e.addEventListener("load",t,!1)}return this},get:function(e){return e===C?T.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return S.every.call(this,function(n,t){return!1!==e.call(n,t,n)}),this},filter:function(e){return t(e)?this.not(this.not(e)):A(D.call(this,function(n){return Q.matches(n,e)}))},add:function(e,n){return A(O(this.concat(A(e,n))))},is:function(e){return this.length>0&&Q.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==C)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&t(e.item)?T.call(e):A(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return A(n)},has:function(e){return this.filter(function(){return a(e)?A.contains(this,e):A(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!a(e)?e:A(e)},last:function(){var e=this[this.length-1];return e&&!a(e)?e:A(e)},find:function(e){var n=this;return e?"object"==typeof e?A(e).filter(function(){var e=this;return S.some.call(n,function(n){return A.contains(n,e)})}):1==this.length?A(Q.qsa(this[0],e)):this.map(function(){return Q.qsa(this,e)}):A()},closest:function(e,n){var t=[],i="object"==typeof e&&A(e);return this.each(function(a,r){for(;r&&!(i?i.indexOf(r)>=0:Q.matches(r,e));)r=r!==n&&!o(r)&&r.parentNode;r&&t.indexOf(r)<0&&t.push(r)}),A(t)},parents:function(e){for(var n=[],t=this;t.length>0;)t=A.map(t,function(e){return(e=e.parentNode)&&!o(e)&&n.indexOf(e)<0?(n.push(e),e):void 0});return v(n,e)},parent:function(e){return v(O(this.pluck("parentNode")),e)},children:function(e){return v(this.map(function(){return m(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||T.call(this.childNodes)})},siblings:function(e){return v(this.map(function(e,n){return D.call(m(n.parentNode),function(e){return e!==n})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return A.map(this,function(n){return n[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=A(e).get(0),o=i.parentNode||this.length>1;return this.each(function(t){A(this).wrapAll(n?e.call(this,t):o?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){A(this[0]).before(e=A(e));for(var n;(n=e.children()).length;)e=n.first();A(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=A(this),o=i.contents(),a=n?e.call(this,t):e;o.length?o.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){A(this).replaceWith(A(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var n=A(this);(e===C?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(e){return A(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return A(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(n){var t=this.innerHTML;A(this).empty().append(y(this,e,n,t))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(n){var t=y(this,e,n,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,n){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(a(e))for(k in e)_(this,k,e[k]);else _(this,e,y(this,n,t,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(e))?t:C},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){_(this,e)},this)})},prop:function(e,n){return e=K[e]||e,1 in arguments?this.each(function(t){this[e]=y(this,n,t,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=K[e]||e,this.each(function(){delete this[e]})},data:function(e,n){var t="data-"+e.replace(H,"-$1").toLowerCase(),i=1 in arguments?this.attr(t,n):this.attr(t);return null!==i?b(i):C},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(n){this.value=y(this,e,n,this.value)})):this[0]&&(this[0].multiple?A(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(n){if(n)return this.each(function(e){var t=A(this),i=y(this,n,e,t.offset()),o=t.offsetParent().offset(),a={top:i.top-o.top,left:i.left-o.left};"static"==t.css("position")&&(a.position="relative"),t.css(a)});if(!this.length)return null;if(P.documentElement!==this[0]&&!A.contains(P.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+e.pageXOffset,top:t.top+e.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,t){if(arguments.length<2){var i=this[0];if("string"==typeof e){if(!i)return;return i.style[j(e)]||getComputedStyle(i,"").getPropertyValue(e)}if($(e)){if(!i)return;var o={},a=getComputedStyle(i,"");return A.each(e,function(e,n){o[n]=i.style[j(n)]||a.getPropertyValue(n)}),o}}var r="";if("string"==n(e))t||0===t?r=l(e)+":"+p(e,t):this.each(function(){this.style.removeProperty(l(e))});else for(k in e)e[k]||0===e[k]?r+=l(k)+":"+p(k,e[k])+";":this.each(function(){this.style.removeProperty(l(k))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(A(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&S.some.call(this,function(e){return this.test(w(e))},u(e))},addClass:function(e){return e?this.each(function(n){if("className"in this){E=[];var t=w(this);y(this,e,n,t).split(/\s+/g).forEach(function(e){A(this).hasClass(e)||E.push(e)},this),E.length&&w(this,t+(t?" ":"")+E.join(" "))}}):this},removeClass:function(e){return this.each(function(n){if("className"in this){if(e===C)return w(this,"");E=w(this),y(this,e,n,E).split(/\s+/g).forEach(function(e){E=E.replace(u(e)," ")}),w(this,E.trim())}})},toggleClass:function(e,n){return e?this.each(function(t){var i=A(this);y(this,e,t,w(this)).split(/\s+/g).forEach(function(e){(n===C?!i.hasClass(e):n)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===C?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===C?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],n=this.offsetParent(),t=this.offset(),i=B.test(n[0].nodeName)?{top:0,left:0}:n.offset();return t.top-=parseFloat(A(e).css("margin-top"))||0,t.left-=parseFloat(A(e).css("margin-left"))||0,i.top+=parseFloat(A(n[0]).css("border-top-width"))||0,i.left+=parseFloat(A(n[0]).css("border-left-width"))||0,{top:t.top-i.top,left:t.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||P.body;e&&!B.test(e.nodeName)&&"static"==A(e).css("position");)e=e.offsetParent;return e})}},A.fn.detach=A.fn.remove,["width","height"].forEach(function(e){var n=e.replace(/./,function(e){return e[0].toUpperCase()});A.fn[e]=function(t){var a,r=this[0];return t===C?i(r)?r["inner"+n]:o(r)?r.documentElement["scroll"+n]:(a=this.offset())&&a[e]:this.each(function(n){r=A(this),r.css(e,y(this,t,n,r[e]()))})}}),G.forEach(function(t,i){var o=i%2;A.fn[t]=function(){var t,a,r=A.map(arguments,function(e){var i=[];return t=n(e),"array"==t?(e.forEach(function(e){return e.nodeType!==C?i.push(e):A.zepto.isZ(e)?i=i.concat(e.get()):void(i=i.concat(Q.fragment(e)))}),i):"object"==t||null==e?e:Q.fragment(e)}),s=this.length>1;return r.length<1?this:this.each(function(n,t){a=o?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null
;var c=A.contains(P.documentElement,a);r.forEach(function(n){if(s)n=n.cloneNode(!0);else if(!a)return A(n).remove();a.insertBefore(n,t),c&&x(n,function(n){if(!(null==n.nodeName||"SCRIPT"!==n.nodeName.toUpperCase()||n.type&&"text/javascript"!==n.type||n.src)){var t=n.ownerDocument?n.ownerDocument.defaultView:e;t.eval.call(t,n.innerHTML)}})})})},A.fn[o?t+"To":"insert"+(i?"Before":"After")]=function(e){return A(e)[t](this),this}}),Q.Z.prototype=h.prototype=A.fn,Q.uniq=O,Q.deserializeValue=b,A.zepto=Q,A}();return e.Zepto=n,void 0===e.$&&(e.$=n),function(n){function t(e){return e._zid||(e._zid=f++)}function i(e,n,i,r){if(n=o(n),n.ns)var s=a(n.ns);return(v[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!i||t(e.fn)===t(i))&&(!r||e.sel==r)})}function o(e){var n=(""+e).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,n){return e.del&&!_&&e.e in w||!!n}function s(e){return b[e]||_&&w[e]||e}function c(e,i,a,c,d,u,f){var m=t(e),h=v[m]||(v[m]=[]);i.split(/\s/).forEach(function(t){if("ready"==t)return n(document).ready(a);var i=o(t);i.fn=a,i.sel=d,i.e in b&&(a=function(e){var t=e.relatedTarget;return!t||t!==this&&!n.contains(this,t)?i.fn.apply(this,arguments):void 0}),i.del=u;var m=u||a;i.proxy=function(n){if(n=l(n),!n.isImmediatePropagationStopped()){n.data=c;var t=m.apply(e,n._args==p?[n]:[n].concat(n._args));return!1===t&&(n.preventDefault(),n.stopPropagation()),t}},i.i=h.length,h.push(i),"addEventListener"in e&&e.addEventListener(s(i.e),i.proxy,r(i,f))})}function d(e,n,o,a,c){var d=t(e);(n||"").split(/\s/).forEach(function(n){i(e,n,o,a).forEach(function(n){delete v[d][n.i],"removeEventListener"in e&&e.removeEventListener(s(n.e),n.proxy,r(n,c))})})}function l(e,t){if(t||!e.isDefaultPrevented){t||(t=e),n.each(A,function(n,i){var o=t[n];e[n]=function(){return this[i]=x,o&&o.apply(t,arguments)},e[i]=C});try{e.timeStamp||(e.timeStamp=Date.now())}catch(e){}(t.defaultPrevented!==p?t.defaultPrevented:"returnValue"in t?!1===t.returnValue:t.getPreventDefault&&t.getPreventDefault())&&(e.isDefaultPrevented=x)}return e}function u(e){var n,t={originalEvent:e};for(n in e)k.test(n)||e[n]===p||(t[n]=e[n]);return l(t,e)}var p,f=1,m=Array.prototype.slice,h=n.isFunction,g=function(e){return"string"==typeof e},v={},y={},_="onfocusin"in e,w={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",n.event={add:c,remove:d},n.proxy=function(e,i){var o=2 in arguments&&m.call(arguments,2);if(h(e)){var a=function(){return e.apply(i,o?o.concat(m.call(arguments)):arguments)};return a._zid=t(e),a}if(g(i))return o?(o.unshift(e[i],e),n.proxy.apply(null,o)):n.proxy(e[i],e);throw new TypeError("expected function")},n.fn.bind=function(e,n,t){return this.on(e,n,t)},n.fn.unbind=function(e,n){return this.off(e,n)},n.fn.one=function(e,n,t,i){return this.on(e,n,t,i,1)};var x=function(){return!0},C=function(){return!1},k=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};n.fn.delegate=function(e,n,t){return this.on(n,e,t)},n.fn.undelegate=function(e,n,t){return this.off(n,e,t)},n.fn.live=function(e,t){return n(document.body).delegate(this.selector,e,t),this},n.fn.die=function(e,t){return n(document.body).undelegate(this.selector,e,t),this},n.fn.on=function(e,t,i,o,a){var r,s,l=this;return e&&!g(e)?(n.each(e,function(e,n){l.on(e,t,i,n,a)}),l):(g(t)||h(o)||!1===o||(o=i,i=t,t=p),(o===p||!1===i)&&(o=i,i=p),!1===o&&(o=C),l.each(function(l,p){a&&(r=function(e){return d(p,e.type,o),o.apply(this,arguments)}),t&&(s=function(e){var i,a=n(e.target).closest(t,p).get(0);return a&&a!==p?(i=n.extend(u(e),{currentTarget:a,liveFired:p}),(r||o).apply(a,[i].concat(m.call(arguments,1)))):void 0}),c(p,e,o,i,t,s||r)}))},n.fn.off=function(e,t,i){var o=this;return e&&!g(e)?(n.each(e,function(e,n){o.off(e,t,n)}),o):(g(t)||h(i)||!1===i||(i=t,t=p),!1===i&&(i=C),o.each(function(){d(this,e,i,t)}))},n.fn.trigger=function(e,t){return e=g(e)||n.isPlainObject(e)?n.Event(e):l(e),e._args=t,this.each(function(){e.type in w&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):n(this).triggerHandler(e,t)})},n.fn.triggerHandler=function(e,t){var o,a;return this.each(function(r,s){o=u(g(e)?n.Event(e):e),o._args=t,o.target=s,n.each(i(s,e.type||e),function(e,n){return a=n.proxy(o),!o.isImmediatePropagationStopped()&&void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){n.fn[e]=function(n){return 0 in arguments?this.bind(e,n):this.trigger(e)}}),n.Event=function(e,n){g(e)||(n=e,e=n.type);var t=document.createEvent(y[e]||"Events"),i=!0;if(n)for(var o in n)"bubbles"==o?i=!!n[o]:t[o]=n[o];return t.initEvent(e,i,!0),l(t)}}(n),function(n){function t(e,t,i){var o=n.Event(t);return n(e).trigger(o,i),!o.isDefaultPrevented()}function i(e,n,i,o){return e.global?t(n||w,i,o):void 0}function o(e){e.global&&0==n.active++&&i(e,null,"ajaxStart")}function a(e){e.global&&!--n.active&&i(e,null,"ajaxStop")}function r(e,n){var t=n.context;return!1!==n.beforeSend.call(t,e,n)&&!1!==i(n,t,"ajaxBeforeSend",[e,n])&&void i(n,t,"ajaxSend",[e,n])}function s(e,n,t,o){var a=t.context,r="success";t.success.call(a,e,r,n),o&&o.resolveWith(a,[e,r,n]),i(t,a,"ajaxSuccess",[n,t,e]),d(r,n,t)}function c(e,n,t,o,a){var r=o.context;o.error.call(r,t,n,e),a&&a.rejectWith(r,[t,n,e]),i(o,r,"ajaxError",[t,o,e||n]),d(n,t,o)}function d(e,n,t){var o=t.context;t.complete.call(o,n,e),i(t,o,"ajaxComplete",[n,t]),a(t)}function l(e,n,t){if(t.dataFilter==u)return e;var i=t.context;return t.dataFilter.call(i,e,n)}function u(){}function p(e){return e&&(e=e.split(";",2)[0]),e&&(e==A?"html":e==k?"json":x.test(e)?"script":C.test(e)&&"xml")||"text"}function f(e,n){return""==n?e:(e+"&"+n).replace(/[&?]{1,2}/,"?")}function m(e){e.processData&&e.data&&"string"!=n.type(e.data)&&(e.data=n.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=f(e.url,e.data),e.data=void 0)}function h(e,t,i,o){return n.isFunction(t)&&(o=i,i=t,t=void 0),n.isFunction(i)||(o=i,i=void 0),{url:e,data:t,success:i,dataType:o}}function g(e,t,i,o){var a,r=n.isArray(t),s=n.isPlainObject(t);n.each(t,function(t,c){a=n.type(c),o&&(t=i?o:o+"["+(s||"object"==a||"array"==a?t:"")+"]"),!o&&r?e.add(c.name,c.value):"array"==a||!i&&"object"==a?g(e,c,i,t):e.add(t,c)})}var v,y,_=+new Date,w=e.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,C=/^(?:text|application)\/xml/i,k="application/json",A="text/html",E=/^\s*$/,j=w.createElement("a");j.href=e.location.href,n.active=0,n.ajaxJSONP=function(t,i){if(!("type"in t))return n.ajax(t);var o,a,d=t.jsonpCallback,l=(n.isFunction(d)?d():d)||"Zepto"+_++,u=w.createElement("script"),p=e[l],f=function(e){n(u).triggerHandler("error",e||"abort")},m={abort:f};return i&&i.promise(m),n(u).on("load error",function(r,d){clearTimeout(a),n(u).off().remove(),"error"!=r.type&&o?s(o[0],m,t,i):c(null,d||"error",m,t,i),e[l]=p,o&&n.isFunction(p)&&p(o[0]),p=o=void 0}),!1===r(m,t)?(f("abort"),m):(e[l]=function(){o=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),w.head.appendChild(u),t.timeout>0&&(a=setTimeout(function(){f("timeout")},t.timeout)),m)},n.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:k,xml:"application/xml, text/xml",html:A,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:u},n.ajax=function(t){var i,a,d=n.extend({},t||{}),h=n.Deferred&&n.Deferred();for(v in n.ajaxSettings)void 0===d[v]&&(d[v]=n.ajaxSettings[v]);o(d),d.crossDomain||(i=w.createElement("a"),i.href=d.url,i.href=i.href,d.crossDomain=j.protocol+"//"+j.host!=i.protocol+"//"+i.host),d.url||(d.url=e.location.toString()),(a=d.url.indexOf("#"))>-1&&(d.url=d.url.slice(0,a)),m(d);var g=d.dataType,_=/\?.+=\?/.test(d.url);if(_&&(g="jsonp"),!1!==d.cache&&(t&&!0===t.cache||"script"!=g&&"jsonp"!=g)||(d.url=f(d.url,"_="+Date.now())),"jsonp"==g)return _||(d.url=f(d.url,d.jsonp?d.jsonp+"=?":!1===d.jsonp?"":"callback=?")),n.ajaxJSONP(d,h);var b,x=d.accepts[g],C={},k=function(e,n){C[e.toLowerCase()]=[e,n]},A=/^([\w-]+:)\/\//.test(d.url)?RegExp.$1:e.location.protocol,O=d.xhr(),S=O.setRequestHeader;if(h&&h.promise(O),d.crossDomain||k("X-Requested-With","XMLHttpRequest"),k("Accept",x||"*/*"),(x=d.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),O.overrideMimeType&&O.overrideMimeType(x)),(d.contentType||!1!==d.contentType&&d.data&&"GET"!=d.type.toUpperCase())&&k("Content-Type",d.contentType||"application/x-www-form-urlencoded"),d.headers)for(y in d.headers)k(y,d.headers[y]);if(O.setRequestHeader=k,O.onreadystatechange=function(){if(4==O.readyState){O.onreadystatechange=u,clearTimeout(b);var e,t=!1;if(O.status>=200&&O.status<300||304==O.status||0==O.status&&"file:"==A){if(g=g||p(d.mimeType||O.getResponseHeader("content-type")),"arraybuffer"==O.responseType||"blob"==O.responseType)e=O.response;else{e=O.responseText;try{e=l(e,g,d),"script"==g?(0,eval)(e):"xml"==g?e=O.responseXML:"json"==g&&(e=E.test(e)?null:n.parseJSON(e))}catch(e){t=e}if(t)return c(t,"parsererror",O,d,h)}s(e,O,d,h)}else c(O.statusText||null,O.status?"error":"abort",O,d,h)}},!1===r(O,d))return O.abort(),c(null,"abort",O,d,h),O;var N=!("async"in d)||d.async;if(O.open(d.type,d.url,N,d.username,d.password),d.xhrFields)for(y in d.xhrFields)O[y]=d.xhrFields[y];for(y in C)S.apply(O,C[y]);return d.timeout>0&&(b=setTimeout(function(){O.onreadystatechange=u,O.abort(),c(null,"timeout",O,d,h)},d.timeout)),O.send(d.data?d.data:null),O},n.get=function(){return n.ajax(h.apply(null,arguments))},n.post=function(){var e=h.apply(null,arguments);return e.type="POST",n.ajax(e)},n.getJSON=function(){var e=h.apply(null,arguments);return e.dataType="json",n.ajax(e)},n.fn.load=function(e,t,i){if(!this.length)return this;var o,a=this,r=e.split(/\s/),s=h(e,t,i),c=s.success;return r.length>1&&(s.url=r[0],o=r[1]),s.success=function(e){a.html(o?n("<div>").html(e.replace(b,"")).find(o):e),c&&c.apply(a,arguments)},n.ajax(s),this};var O=encodeURIComponent;n.param=function(e,t){var i=[];return i.add=function(e,t){n.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(O(e)+"="+O(t))},g(i,e,t),i.join("&").replace(/%20/g,"+")}}(n),function(e){e.fn.serializeArray=function(){var n,t,i=[],o=function(e){return e.forEach?e.forEach(o):void i.push({name:n,value:e})};return this[0]&&e.each(this[0].elements,function(i,a){t=a.type,(n=a.name)&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||a.checked)&&o(e(a).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(n){e.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}),e.join("&")},e.fn.submit=function(n){if(0 in arguments)this.bind("submit",n);else if(this.length){var t=e.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(n),function(e){function n(e,n){var t=this.os={},i=this.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=e.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!e.match(/\(Macintosh\; Intel /),s=e.match(/(iPad).*OS\s([\d_]+)/),c=e.match(/(iPod)(.*OS\s([\d_]+))?/),d=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=/Win\d{2}|Windows/.test(n),p=e.match(/Windows Phone ([\d.]+)/),f=l&&e.match(/TouchPad/),m=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),g=e.match(/(BlackBerry).*Version\/([\d.]+)/),v=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),_=e.match(/PlayBook/),w=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),x=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),C=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),k=!w&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),A=k||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(i.webkit=!!o)&&(i.version=o[1]),a&&(t.android=!0,t.version=a[2]),d&&!c&&(t.ios=t.iphone=!0,t.version=d[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),c&&(t.ios=t.ipod=!0,t.version=c[3]?c[3].replace(/_/g,"."):null),p&&(t.wp=!0,t.version=p[1]),l&&(t.webos=!0,t.version=l[2]),f&&(t.touchpad=!0),g&&(t.blackberry=!0,t.version=g[2]),v&&(t.bb10=!0,t.version=v[2]),y&&(t.rimtabletos=!0,t.version=y[2]),_&&(i.playbook=!0),m&&(t.kindle=!0,t.version=m[1]),h&&(i.silk=!0,i.version=h[1]),!h&&t.android&&e.match(/Kindle Fire/)&&(i.silk=!0),w&&(i.chrome=!0,i.version=w[1]),b&&(i.firefox=!0,i.version=b[1]),x&&(t.firefoxos=!0,t.version=x[1]),C&&(i.ie=!0,i.version=C[1]),A&&(r||t.ios||u)&&(i.safari=!0,t.ios||(i.version=A[1])),k&&(i.webview=!0),t.tablet=!!(s||_||a&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||C&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(a||d||l||g||v||w&&e.match(/Android/)||w&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||C&&e.match(/Touch/)))}n.call(e,navigator.userAgent,navigator.platform),e.__detect=n}(n),function(e,n){function t(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(e){return o?o+e:e.toLowerCase()}var o,a,r,s,c,d,l,u,p,f,m="",h={Webkit:"webkit",Moz:"",O:"o"},g=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};g.style.transform===n&&e.each(h,function(e,t){return g.style[e+"TransitionProperty"]!==n?(m="-"+e.toLowerCase()+"-",o=t,!1):void 0}),a=m+"transform",y[r=m+"transition-property"]=y[s=m+"transition-duration"]=y[d=m+"transition-delay"]=y[c=m+"transition-timing-function"]=y[l=m+"animation-name"]=y[u=m+"animation-duration"]=y[f=m+"animation-delay"]=y[p=m+"animation-timing-function"]="",e.fx={off:o===n&&g.style.transitionProperty===n,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(t,i,o,a,r){return e.isFunction(i)&&(a=i,o=n,i=n),e.isFunction(o)&&(a=o,o=n),e.isPlainObject(i)&&(o=i.easing,a=i.complete,r=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(t,i,o,a,r)},e.fn.anim=function(i,o,m,h,g){var _,w,b,x={},C="",k=this,A=e.fx.transitionEnd,E=!1;if(o===n&&(o=e.fx.speeds._default/1e3),g===n&&(g=0),e.fx.off&&(o=0),"string"==typeof i)x[l]=i,x[u]=o+"s",x[f]=g+"s",x[p]=m||"linear",A=e.fx.animationEnd;else{w=[];for(_ in i)v.test(_)?C+=_+"("+i[_]+") ":(x[_]=i[_],w.push(t(_)));C&&(x[a]=C,w.push(a)),o>0&&"object"==typeof i&&(x[r]=w.join(", "),x[s]=o+"s",x[d]=g+"s",x[c]=m||"linear")}return b=function(n){if(void 0!==n){if(n.target!==n.currentTarget)return;e(n.target).unbind(A,b)}else e(this).unbind(A,b);E=!0,e(this).css(y),h&&h.call(this)},o>0&&(this.bind(A,b),setTimeout(function(){E||b.call(k)},1e3*(o+g)+25)),this.size()&&this.get(0).clientLeft,this.css(x),0>=o&&setTimeout(function(){k.each(function(){b.call(this)})},0),this},g=null}(n),function(n,t){function i(e,i,o,a,r){"function"!=typeof i||r||(r=i,i=t);var s={opacity:o};return a&&(s.scale=a,e.css(n.fx.cssPrefix+"transform-origin","0 0")),e.animate(s,i,null,r)}function o(e,t,o,a){return i(e,t,0,o,function(){s.call(n(this)),a&&a.call(this)})}var a=e.document,r=(a.documentElement,n.fn.show),s=n.fn.hide,c=n.fn.toggle;n.fn.show=function(e,n){return r.call(this),e===t?e=0:this.css("opacity",0),i(this,e,1,"1,1",n)},n.fn.hide=function(e,n){return e===t?s.call(this):o(this,e,"0,0",n)},n.fn.toggle=function(e,i){return e===t||"boolean"==typeof e?c.call(this,e):this.each(function(){var t=n(this);t["none"==t.css("display")?"show":"hide"](e,i)})},n.fn.fadeTo=function(e,n,t){return i(this,e,n,null,t)},n.fn.fadeIn=function(e,n){var t=this.css("opacity");return t>0?this.css("opacity",0):t=1,r.call(this).fadeTo(e,t,n)},n.fn.fadeOut=function(e,n){return o(this,e,null,n)},n.fn.fadeToggle=function(e,t){return this.each(function(){var i=n(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](e,t)})}}(n),function(e){var n,t=[];e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(t.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",n&&clearTimeout(n),n=setTimeout(function(){t=[]},6e4)),this.parentNode.removeChild(this))})}}(n),function(e){function n(n,i){var c=n[s],d=c&&o[c];if(void 0===i)return d||t(n);if(d){if(i in d)return d[i];var l=r(i);if(l in d)return d[l]}return a.call(e(n),i)}function t(n,t,a){var c=n[s]||(n[s]=++e.uuid),d=o[c]||(o[c]=i(n));return void 0!==t&&(d[r(t)]=a),d}function i(n){var t={};return e.each(n.attributes||c,function(n,i){0==i.name.indexOf("data-")&&(t[r(i.name.replace("data-",""))]=e.zepto.deserializeValue(i.value))}),t}var o={},a=e.fn.data,r=e.camelCase,s=e.expando="Zepto"+ +new Date,c=[];e.fn.data=function(i,o){return void 0===o?e.isPlainObject(i)?this.each(function(n,o){e.each(i,function(e,n){t(o,e,n)})}):0 in this?n(this[0],i):void 0:this.each(function(){t(this,i,o)})},e.data=function(n,t,i){return e(n).data(t,i)},e.hasData=function(n){var t=n[s],i=t&&o[t];return!!i&&!e.isEmptyObject(i)},e.fn.removeData=function(n){return"string"==typeof n&&(n=n.split(/\s+/)),this.each(function(){var t=this[s],i=t&&o[t];i&&e.each(n||i,function(e){delete i[n?r(this):e]})})},["remove","empty"].forEach(function(n){var t=e.fn[n];e.fn[n]=function(){var e=this.find("*");return"remove"===n&&(e=e.add(this)),e.removeData(),t.call(this)}})}(n),function(e){function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],o="pending",a={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n(function(n){e.each(i,function(i,o){var s=e.isFunction(t[i])&&t[i];r[o[1]](function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,r=s?[t]:arguments;n[o[0]+"With"](i,r)}})}),t=null}).promise()},promise:function(n){return null!=n?e.extend(n,a):a}},r={};return e.each(i,function(e,n){var t=n[2],s=n[3];a[n[1]]=t.add,s&&t.add(function(){o=s},i[1^e][2].disable,i[2][2].lock),r[n[0]]=function(){return r[n[0]+"With"](this===r?a:this,arguments),this},r[n[0]+"With"]=t.fireWith}),a.promise(r),t&&t.call(r,r),r}var t=Array.prototype.slice;e.when=function(i){var o,a,r,s=t.call(arguments),c=s.length,d=0,l=1!==c||i&&e.isFunction(i.promise)?c:0,u=1===l?i:n(),p=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===o?u.notifyWith(n,i):--l||u.resolveWith(n,i)}};if(c>1)for(o=new Array(c),a=new Array(c),r=new Array(c);c>d;++d)s[d]&&e.isFunction(s[d].promise)?s[d].promise().done(p(d,r,s)).fail(u.reject).progress(p(d,a,o)):--l;return l||u.resolveWith(r,s),u.promise()},e.Deferred=n}(n),function(n){function t(e,n,t,i){return Math.abs(e-n)>=Math.abs(t-i)?e-n>0?"Left":"Right":t-i>0?"Up":"Down"}function i(){u=null,f.last&&(f.el.trigger("longTap"),f={})}function o(){u&&clearTimeout(u),u=null}function a(){c&&clearTimeout(c),d&&clearTimeout(d),l&&clearTimeout(l),u&&clearTimeout(u),c=d=l=u=null,f={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function s(e,n){return e.type=="pointer"+n||e.type.toLowerCase()=="mspointer"+n}var c,d,l,u,p,f={};n(document).ready(function(){var m,h,g,v,y=0,_=0;"MSGesture"in e&&(p=new MSGesture,p.target=document.body),n(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(f.el.trigger("swipe"),f.el.trigger("swipe"+n))}).on("touchstart MSPointerDown pointerdown",function(e){(!(v=s(e,"down"))||r(e))&&(g=v?e:e.touches[0],e.touches&&1===e.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),m=Date.now(),h=m-(f.last||m),f.el=n("tagName"in g.target?g.target:g.target.parentNode),c&&clearTimeout(c),f.x1=g.pageX,f.y1=g.pageY,h>0&&250>=h&&(f.isDoubleTap=!0),f.last=m,u=setTimeout(i,750),p&&v&&p.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(v=s(e,"move"))||r(e))&&(g=v?e:e.touches[0],o(),f.x2=g.pageX,f.y2=g.pageY,y+=Math.abs(f.x1-f.x2),_+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp pointerup",function(e){(!(v=s(e,"up"))||r(e))&&(o(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?l=setTimeout(function(){f.el&&(f.el.trigger("swipe"),f.el.trigger("swipe"+t(f.x1,f.x2,f.y1,f.y2))),f={}},0):"last"in f&&(30>y&&30>_?d=setTimeout(function(){var e=n.Event("tap");e.cancelTouch=a,f.el&&f.el.trigger(e),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):c=setTimeout(function(){c=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),y=_=0)}).on("touchcancel MSPointerCancel pointercancel",a),n(e).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){n.fn[e]=function(n){return this.on(e,n)}})}(n),function(e){function n(e){return"tagName"in e?e:e.parentNode}if(e.os.ios){var t={};e(document).bind("gesturestart",function(e){var i=Date.now();t.last,t.target=n(e.target),t.e1=e.scale,t.last=i}).bind("gesturechange",function(e){t.e2=e.scale}).bind("gestureend",function(n){t.e2>0?(0!=Math.abs(t.e1-t.e2)&&e(t.target).trigger("pinch")&&e(t.target).trigger("pinch"+(t.e1-t.e2>0?"In":"Out")),t.e1=t.e2=t.last=0):"last"in t&&(t={})}),["pinch","pinchIn","pinchOut"].forEach(function(n){e.fn[n]=function(e){return this.bind(n,e)}})}}(n),function(e){e.Callbacks=function(n){n=e.extend({},n);var t,i,o,a,r,s,c=[],d=!n.once&&[],l=function(e){for(t=n.memory&&e,i=!0,s=a||0,a=0,r=c.length,o=!0;c&&r>s;++s)if(!1===c[s].apply(e[0],e[1])&&n.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&l(d.shift()):t?c.length=0:u.disable())},u={add:function(){if(c){var i=c.length,s=function(t){e.each(t,function(e,t){"function"==typeof t?n.unique&&u.has(t)||c.push(t):t&&t.length&&"string"!=typeof t&&s(t)})};s(arguments),o?r=c.length:t&&(a=i,l(t))}return this},remove:function(){return c&&e.each(arguments,function(n,t){for(var i;(i=e.inArray(t,c,i))>-1;)c.splice(i,1),o&&(r>=i&&--r,s>=i&&--s)}),this},has:function(n){return!(!c||!(n?e.inArray(n,c)>-1:c.length))},empty:function(){return r=c.length=0,this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||u.disable(),this},locked:function(){return!d},fireWith:function(e,n){return!c||i&&!d||(n=n||[],n=[e,n.slice?n.slice():n],o?d.push(n):l(n)),this},fire:function(){return u.fireWith(this,arguments)},fired:function(){return!!i}};return u}}(n),n}),function(){define("query",["zepto"],function(e){var n,t;return t=yidian.docinfo.query.s,n={},n.getComments=function(n,t){return e.get("/home/q/getcomments?docid="+n,function(e){return t&&t(e)})},n.getMoreReplies=function(n,t){return e.get("/home/q/getmorereplies?comment_id="+n,function(e){return t(n,e)})},n.addUp=function(n,t){return e.get("/home/q/addup?docid="+n,function(e){return t&&t(e)})},n.addDown=function(n,t){return e.get("/home/q/adddown?docid="+n,function(e){return t&&t(e)})},n.addComment=function(n,i,o,a){var r;return r=o||"",e.get("/home/q/addcomment?s="+t+"&docid="+n+"&comment="+encodeURIComponent(i)+"&reply="+r,function(e){return e&&"success"===e.status&&(e.comment.reply_to=o,e.comment.mine=!0),a(e)})},n.delComment=function(n,t){var i;return i="/home/q/delcomment?docid="+n.docid,n.comment_id&&(i+="&comment_id="+n.comment_id),n.reply_id&&(i+="&reply_id="+n.reply_id),e.get(i,function(e){return t(e)})},n.addUpToComment=function(n,t){return e.get("/home/q/addupcomment?commentid="+n,function(e){return t&&t(e)})},n.getRecommendVideo=function(n,i){return e.get("/home/q/getrecommendvideo?docid="+n+"&s="+t,function(e){return i(e)})},n.getHotVideo=function(n,i,o){return e.get("/home/q/get_hot_video?count="+n+"&s="+t+"&docid="+(i||""),function(e){return o(e)})},n.getRelatedVideo=function(n,i,o){return e.get("/home/q/get_related_video?count="+n+"&s="+t+"&docid="+(i||""),function(e){return o(e)})},n.getRelatedNews=function(n,i,o,a){return e.get("/home/q/getrelatednews?docid="+n+"&start="+i+"&length="+o+"&s="+t,function(n){return e(window).trigger("news:ajaxCallback",[n]),a(n)})},n.getRelatedNewsALl=function(n,i,o,a){return e.get("/home/q/getrelatednewsall?docid="+n+"&start="+i+"&length="+o+"&s="+t,function(e){return a(e)})},n.getNewsListForChannel=function(n,t,i,o){return e.get("/home/q/news_list_for_channel?channel_id="+n+"&cstart="+t+"&cend="+i+"&infinite=false&refresh=1",function(e){return o(e)})},n})}.call(this),function(e){define("zepto_cookie",["zepto"],function(){return function(){!function(e){e.extend(e.fn,{cookie:function(n,t,i){var o,a,r,s;return arguments.length>1&&"[object Object]"!==String(t)?(i=e.extend({},i),null!==t&&void 0!==t||(i.expires=-1),"number"==typeof i.expires&&(o=24*i.expires*60*60*1e3,a=i.expires=new Date,a.setTime(a.getTime()+o)),t=String(t),document.cookie=[encodeURIComponent(n),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},s=i.raw?function(e){return e}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie))?s(r[1]):null)}})}(Zepto)}.apply(e,arguments)})}(this),function(){define("log",["zepto","zepto_cookie"],function(e){var n,t,i,o,a,r,s,c,d,l;return console.log("begin module log.js"),i=function(){var e,n,t,i,o,a,r;return e=new Date,r=e.getFullYear(),o=e.getMonth()+1,o=o<=9?"0"+o:o,n=e.getDate()<=9?"0"+e.getDate():e.getDate(),t=e.getHours()<9?"0"+e.getHours():e.getHours(),i=e.getMinutes()<9?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<9?"0"+e.getSeconds():e.getSeconds(),r+"-"+o+"-"+n+" "+t+":"+i+":"+a},e.fn.cookie("wuid")&&e.fn.cookie("wuid_createAt")||(e.fn.cookie("wuid",Math.floor(1e15*Math.random()),{domain:".yidianzixun.com",expires:1e3,path:"/"}),e.fn.cookie("wuid_createAt",i(),{domain:".yidianzixun.com",expires:1e3,path:"/"})),r=yidian.docinfo.query.s||"",s=yidian.docinfo.query.s_real||"",d=yidian.docinfo.query.utk||"",n={8:"WEIXIN_MOMENTS",3:"WEIXIN_FRIENDS",9:"QQ",10:"QQ_SPACE",1:"WEIBO",4:"EMAIL",5:"QQ_WEIBO",11:"MI_LIAO",6:"SMS",webapp:"WEBAPP",traffic:"MARKET_PROMOTION",mb:"FEEDS",oppobrowser:"FEEDS",cmbrowser:"FEEDS","mb,mb":"FEEDS",misafe:"CHANNEL_CO",ks_office:"CHANNEL_CO",wfbl:"CHANNEL_CO",2345:"CHANNEL_CO",ifeng:"CHANNEL_CO",mirili:"CHANNEL_CO",uccity:"CHANNEL_CO",kh:"CHANNEL_CO",delong:"CHANNEL_CO",sogou:"CHANNEL_CO",tianqi:"CHANNEL_CO",zapya:"CHANNEL_CO",baiduyisheng:"CHANNEL_CO",origin:"OTHER",0:"OTHER",co:"THIRD_PARTY",sms:"SMS_PUSH","":"SEARCH",_whp_:"WEB_HOME_PAGE"},o={log_version:1,browser_user_agent:navigator.userAgent,action_timestamp_ms:Date.now(),uid:{wuid:e.fn.cookie("wuid"),refer_uid:d,bucket_id:0},app_meta:{build_number:yidian.docinfo.query.ver||"",platform:"ios"===yidian.docinfo.query.f?"IOS":"Android",app_id:yidian.docinfo.query.appid||""},refer_social:n[s]||"SOCIAL_UNKNOWN",ui_method:"UI_CLICK",context:{refer_url:document.referrer}},"1"===yidian.docinfo.query.yd_share&&(o.refer_social="CO_SHARE"),o.browser_type="mb"===r?"MB":"oppobrowser"===r?"OB":"cmbrowser"===r?"CMB":yidian.docinfo.is_weixin?"WEIXIN_B":yidian.docinfo.is_qq?"QQ_B":yidian.docinfo.is_weibo?"WEIBO_B":"OTHER_B",yidian.docinfo.doc?(window._hmt=window._hmt||[],_hmt.push(["_trackEvent","clickDoc",r,s]),e.extend(!0,o,{entity:{ctype:yidian.docinfo.doc.ctype||"news",doc_id:yidian.docinfo.doc.docid||""},action_source:{card:"CardWapDocument",page:"PageWapDocument"},context:{political:yidian.docinfo.doc.is_gov||yidian.docinfo.doc.b_political||yidian.docinfo.doc.related_wemedia&&3===yidian.docinfo.doc.related_wemedia.source_type?"true":"false",topic:0!==(l=yidian.docinfo.doc.ttype)&&1!==l&&2!==l?"false":"true"}})):(e.extend(!0,o,{entity:{env_channel_id:yidian.docinfo.channel_id||""},action_source:{card:"CardWapChannel",page:"PageWapChannel"},context:{media_type:"normal"}}),"media"===yidian.docinfo.channel_type&&(o.context.media_type="wemedia")),a="//rl.go2yd.com/web_raw?utk="+d,yidian.docinfo.is_test&&(a="http://10.111.0.59:8880/sendwaplog?utk="+d),c=function(n,t){var i;return n=n||{},i=e.extend(!0,{},o,n),e.ajax({url:a,type:"post",data:JSON.stringify(i),contentType:"application/json",timeout:2e3,complete:function(e,n){var i;try{i=JSON.parse(e.responseText)}catch(e){e,i={status:"failed"}}return t&&t(i)}})},t=function(n){return e("body")[0].addEventListener("click",function(t){var i;for(i in n)if(e(t.target).closest(i).length)return void n[i].apply(e(t.target).closest(i),arguments)},!0)},{logDataOffline:o,sendLogOffline:c,bindLogEvent:t}})}.call(this),function(){define("util",[],function(){var e;return e={},e.getNetType=function(){var e,n;return e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,navigator.userAgent.match(/nettype\/(\S+)/i)&&(n=navigator.userAgent.match(/nettype\/(\S+)/i)[1].toLowerCase()),n=n||e&&e.type||"unknown",-1===["wifi","4g","3g","2g","cellular","unknown"].indexOf(n)&&(n="unknown"),n},e.loadScript=function(e,n){var t;return t=document.createElement("script"),t.type="text/javascript",$(t).on("load",n).on("readystatechange",function(){if("loaded"===t.readyState||"complete"===t.readyState)return n()}),document.getElementsByTagName("head")[0].appendChild(t),t.src=e},e.formate_date=function(e){var n,t,i,o,a,r,s;return"string"!=typeof e||-1===e.indexOf(" ")&&-1===e.indexOf("T")?e=new Date(e):(e=-1!==e.indexOf(" ")?e.split(" "):e.split("T"),n=e[0].split("-"),a=e[1].split(":"),e=new Date(n[0],n[1]-1,n[2],a[0],a[1],a[2])),o=new Date,r=new Date(o.getFullYear(),o.getMonth(),o.getDate()),n=(e-r)/864e5,s=e.getFullYear()+"."+(e.getMonth()+1)+"."+e.getDate(),n>=0?(t=(o-e)/36e5,t<1?(i=(o-e)/6e4,s=i>=1?Math.floor(i)+"":""):s=Math.floor(t)+""):n>-4&&(n=Math.ceil(Math.abs(n)),s=1===n?"":n+""),s},e.handleDuration=function(e){var n,t;return e=Number(e),e&&e>0?(t=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60),n=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),(Math.floor(e/3600)||"")+(n+":")+t):""},e.isArray=function(e){return e instanceof Array},e.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.extend=function(n,t){var i,o,a;a=[];for(i in t)if("object"==typeof(o=t[i]))e.isArray(o)&&!e.isArray(n[i])?n[i]=[]:e.isPlainObject(o)&&!e.isPlainObject(n[i])&&(n[i]={}),a.push(extend(n[i],o,deep));else{if(i in n)continue;a.push(n[i]=o)}return a},e})}.call(this),function(){define("log_article",["zepto","log","util"],function(e,n,t){var i,o,a,r,s,c,d,l;return i=yidian.docinfo.abtest||{},c=yidian.docinfo.query.yidian_stype||"",s=yidian.docinfo.query.s||"",r=yidian.docinfo.page_config||{},a=t.getNetType(),o=n.logDataOffline,d=n.sendLogOffline,o.network={type:"wifi"===a?"NET_WIFI":"unknown"===a?"NET_UNKNOWN":"NET_CELLULAR",name:a},i.bucket_id&&(o.uid.bucket_id=i.bucket_id),l="st"===c?"select_text":"ss"===c?"screenshot":"",d({action_method:"CLICK_DOC",action_source:{card:"video_live"===yidian.docinfo.doc.ctype?"video_live":"CardWapDocument"},context:{share_count:yidian.docinfo.query.share_count||1,share_type:l}}),n.bindLogEvent({".share-qq, .share-weibo, .share-weixin, .share-quan":function(){var n;switch(e(this).attr("data-share")){case"weibo":n="WEIBO";break;case"qzone":n="QQ_SPACE";break;case"friends":n="WEIXIN_MOMENTS";break;case"weixin":n="WEIXIN_FRIENDS";break;default:return}return d({action_method:"SHARE_DOC",
target_id:n,action_times:1})},".banner":function(){var n;return n="CardWapTop","traffic"===s?n="CardWapTopC":e(this).hasClass("plan-gov")?n="CardWapTopD":e(this).hasClass("plan-redpocket")||e(this).find(".redpocket_btn").length?n="CardRedPackage":e(this).hasClass("video-bottom-banner")&&(n="CardWapBottom"),d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:n}})},".article-read-more":function(){return d({action_method:"FETCH_MORE"})},".crap-sofa":function(){return d({action_method:"REPLY_DOC"})},".meta .imedia":function(){return d({action_method:"CLICK_CHANNEL",action_source:{card:"CardWapImedia"}})},".meta .imedia-link":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapFollowImedia"}})},".show-original-img":function(){return d({action_method:"CLICK_SRC_IMAGE"})},"#js-content .picture-gallery":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapPictureGallery"}})},"#js-content a":function(e){return d({action_method:"CLICK_CHANNEL",action_source:{card:"CardWapKeyword"}})},".relative-channel .channel":function(n){return d({action_method:"CLICK_CHANNEL",action_source:{card:"CardWapRelateChn"},entity:{action_id:e(n.target).closest(".subscribe").length?"subscribe_button":"channel_name"}})},".relative-channel .relative-channel-news":function(e){return d({action_method:"CLICK_CHANNEL",action_source:{card:"CardWapRelateChnDoc"}})},".more-comments-btn":function(){return d(r.add_comment?{action_method:"READ_COMMENT",action_source:{card:"CardWapBottom"}}:e("body").hasClass("article_v2")?{action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapMoreContents"}}:{action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapMoreComments"}})},".comments-count":function(){return d({action_method:"READ_COMMENT",action_source:{card:"CardWapTop"}})},"img.profile, .show-comments .comment-nick":function(){return d({action_method:"CLICK_PROFILE"})},".news-list .doc, .video-list .doc":function(){var n,t,i,o;if(i=e(this).attr("data-index"),o=e(this).attr("id"),t=e(this).attr("data-impid"),!e(this).closest(".js-doc-ifeng").length)return e(this).hasClass("doc-app-sec")?d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocAppAll"},current_location:{page_id:i,module_id:o}}):e(this).hasClass("doc-app")?d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocApp"},current_location:{page_id:i,module_id:o}}):e(this).hasClass("doc-hot-video")?d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapPopularDoc"}}):(n={action_method:"CLICK_RELATED_DOC",current_location:{page_id:i,module_id:o}},"undefined"!==t&&(n.entity={impression_id:t}),d(n))},".video-end-doc":function(){var n,t;return n=e(this).attr("data-index"),t=e(this).attr("data-id"),d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocApp"},current_location:{page_id:n,module_id:t}})},".share-window .doc":function(){var n,t;return n=e(this).attr("data-index"),t=e(this).attr("data-docid"),d({action_method:"CLICK_RELATED_DOC",action_source:{card:"CardWapShareDialog"},current_location:{page_id:n,module_id:t}})},"#js-content .a-image":function(){var n,t;if(t=e(this).data("index"),n=yidian.docinfo.doc.image_urls&&yidian.docinfo.doc.image_urls[t]||"",e(this).hasClass("a-image-gif")&&!e(this).children("img").length&&d({action_method:"START_GIF",entity:{image_id:n}}),!e(this).hasClass("a-image-gif")&&(d({action_method:"A_clickImage",entity:{image_id:n}}),-1!==e(this).attr("class").indexOf("image-backflow")))return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapPicture"},entity:{image_id:n}})},"a.praise":function(){if(!e(this).hasClass("active"))return d({action_method:"THUMB_UP_DOC"})},"a.stamp":function(){if(!e(this).hasClass("active"))return d({action_method:"THUMB_DOWN_DOC"})},".show-comments .add-praise":function(){if(!e(this).hasClass("active"))return d({action_method:"THUMB_UP_COMMENT"})},".show-comments .add-comment, .show-comments .comment-link, .show-comments .one-reply-count":function(){return d(r.add_comment?{action_method:"REPLY_COMMENT"}:{action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapReplyComment"}})},".show-comments .expand":function(){return d({action_method:"EXPAND_REPLY"})},".comment-to-app p":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapClickComment"}})},".video":function(){if("1"!==e(this).attr("logsend"))return e(this).attr("logsend","1"),d({action_method:"START_VIDEO"})},".more-video-btn":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapVideoDownload"}})},".video-applink":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapWatchVideoClient"}})},".scroll-download-tipA":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocBannerA"}})},".scroll-download-tipB":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocBannerB"}})},".scroll-download-tip.no-data":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:"CardWapRelatedDocBannerC"}})},".joke-up, .joke-down, .related-joke-img span":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{page:"PageWapChannel",card:"joke"}})},".joke-like":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{page:"PageWapChannel",card:"CardWapFavorite"}})},".joke-comment-num":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{page:"PageWapChannel",card:"CardWapReplyDoc"}})},".summary-layer":function(){return d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{page:"PageWapChannel",card:"CardWapRelatedDoc"}})},".article_v2 .box-item .news-item":function(){var n,t,i,o;return i="CardWapPopularDoc",o=e(this),n=o.attr("data-index"),t=o.attr("data-id"),o.hasClass("big-image")&&(i="CardWapPopularVideo"),d({action_method:"OPEN_DOWNLOAD_PAGE",action_source:{card:i},current_location:{page_id:n,module_id:t}})}}),e(window).on("renderRelatedNews",function(){return d({action_method:"FETCH_COMMENT"})}),e(window).on("relatedNewsExposured",function(n,t){var i,o,a,r,s,c,l;if(i=e(t),"1"!==i.attr("logSended")&&!i.closest(".js-doc-ifeng").length)return i.attr("logSended","1"),s=i.attr("data-index"),c=i.attr("id"),r=i.attr("data-impid"),l=i.attr("data-type"),o="CardWapRelatedDoc","hotvideo"===l&&(o="CardWapPopularDoc"),a={action_method:"VIEW_DOC",action_source:{card:o},current_location:{page_id:s,module_id:c}},"undefined"!==r&&(a.entity={impression_id:r}),d(a)}),e(window).on("shareV2RelatedNewsExposured",function(n,t){var i,o,a,r,s;if(i=e(t),"1"!==i.attr("logSended"))return i.attr("logSended","1"),a=i.attr("data-index"),r=i.attr("data-id"),s="CardWapPopularDoc",i.hasClass("big-image")&&(s="CardWapPopularVideo"),o={action_method:"VIEW_DOC",action_source:{card:s},current_location:{page_id:a,module_id:r}},d(o)}),e("#js-article, .hot-comments").longTap(function(){return d({action_method:"SELECT_WORDS",action_source:{page:"PageWapDocument"}})})})}.call(this),function(){define("ad",["zepto"],function(e){var n,t,i,o,a,r,s,c;return a="android"===yidian.docinfo.os,n={},o=function(){var e,n;for(e="",n=1;n<=20;++n)e+=Math.floor(16*Math.random()).toString(16);return e+=(new Date).getTime().toString(16),e.toUpperCase()},i=function(e,n,t){var i;return i={version:"999999",appid:"web",platform:a?1:0,event:e,aid:n.aid||0,adsfrom:n.adsfrom||"",dspname:n.dspname||"",eid:n.eid||"",ex:n.ex||"",expire_time:n.expireTime||0,pos:0,template:n.template||"",tid:n.tid||"",region:"",from_id:yidian.docinfo.channel_id||"",uuid:o(),ifa:"",imei:"",web_source:yidian.docinfo.query.s_real||"",wemedia_id:yidian.docinfo.is_imedia?yidian.docinfo.channel_id||yidian.docinfo.related_wemedia.id:"",doc_id:yidian.docinfo.doc&&yidian.docinfo.doc.docid||""},"landing_page"===e&&(i.url=t),"view"!==e&&"click"!==e||!yidian.docinfo.doc||(i.doc_source=yidian.docinfo.doc.source),i},c=function(n,t){var i;return null==t&&(t=1),i={url:"/home/q/ad_log_monitor?href="+encodeURIComponent(n),type:"GET",success:function(e){if(e&&"success"===e.status);else if(t-- >0)return c(n,t)},error:function(e){}},e.ajax(i)},t=function(e,n){var t,i,o;return o=a?"0":"1",i=yidian.docinfo.ip||"",/__OS__/i.test(e)||/__IP__/i.test(e)?(e=e.replace(/__OS__/i,o),e=e.replace(/__IP__/i,i)):/miaozhen/i.test(e)?/&o=(?:\s*?http)/i.test(e)?e=e.replace(/&o=(?:\s*?http)/i,"&mo="+o+"&ns="+i+"&o=http"):e+="&mo="+o+"&ns="+i:(/admaster/i.test(e)||/fw4\.me/i.test(e))&&(/,u(?:\s*?http)/i.test(e)?e=e.replace(/,u(?:\s*?http)/,",0a"+o+",f"+i+",uhttp"):e+=",0a"+o+",f"+i),/__IESID__/.test(e)&&yidian.docinfo.doc&&(yidian.docinfo.doc.docid||"",/miaozhen/i.test(e)?(t="yidian_"+(n.aid||0),e=e.replace(/__IESID__/,t)):/admaster/i.test(e)&&(t="PUB_"+(n.aid||0),e=e.replace(/__IESID__/,t))),/__APP__/.test(e)&&(e=e.replace(/__APP__/,"yidian")),e},r=function(e,n,i){var o,a,r,s,d,l,u,p,f;if("view"===e&&n.viewMonitorUrls&&n.viewMonitorUrls.length)for(p=n.viewMonitorUrls,s=0,l=p.length;s<l;s++)(r=p[s])&&(r=t(r,n),c(r));if("click"===e&&n.clickMonitorUrls&&n.clickMonitorUrls.length)for(f=n.clickMonitorUrls,d=0,u=f.length;d<u;d++)(o=f[d])&&(o=t(o,n),c(o));if("landing_page"===e&&i)return a=i,a=t(a,n),location.href=a},s=function(n,t,i,o,a){var c;return null==a&&(a=1),c={url:"/home/q/ad_log_lingxi",type:"GET",data:t,success:function(e){if("success"===e.status){if("landing_page"===i&&o)return r("landing_page",n,o)}else{if(a-- >0)return s(n,t,i,o,a);if("landing_page"===i&&o)return r("landing_page",n,o)}},error:function(e){return console.log(e)}},e.ajax(c)},n.exposure=function(t){var i,o;return o=e(window).height(),i=t.data().adData,t.offset().top<=e(window).scrollTop()+o&&t.offset().top+t.height()>=e(window).scrollTop()?i.logSended?void 0:(n.view(i),i.logSended=!0):i.logSended=!1},n.view=function(e){var n;return n=i("view",e),s(e,n,"view"),r("view",e)},n.click=function(e){var n;return n=i("click",e),s(e,n,"click"),r("click",e)},n.landingPage=function(e,n){var t;return t=i("landing_page",e,n),s(e,t,"landing_page",n)},n.setCarousel=function(n,t){var i,o,a,r,s,c;return a=3300,o=null,i=function(t){var i,o;return t=t||"left",o=e(".carousel-item.active",n),i=e(".flag .active",n),o.removeClass("active"),i.removeClass("active"),"left"===t?o.next(".carousel-item").length?(o.next(".carousel-item").addClass("active"),i.next("span").addClass("active")):(e(".carousel-item",n).first().addClass("active"),e(".flag span",n).first().addClass("active")):o.prev(".carousel-item").length?(o.prev(".carousel-item").addClass("active"),i.prev("span").addClass("active")):(e(".carousel-item",n).last().addClass("active"),e(".flag span",n).last().addClass("active"))},r=function(){return o=setInterval(function(){return i()},a)},t&&r(),s={},c=!1,n.on("touchstart",function(e){return s.x1=e.touches[0].clientX,s.y1=e.touches[0].clientY,c=!0}),n.on("touchmove",function(e){var n;if(s.x2=e.touches[0].clientX,s.y2=e.touches[0].clientY,c&&Math.abs(s.x1-s.x2)>10&&Math.abs(s.x1-s.x2)>Math.abs(s.y1-s.y2))return n=s.x1>s.x2?"left":"right",clearInterval(o),i(n),t&&r(),c=!1})},n})}.call(this),define("text",["module"],function(e){"use strict";var n,t,i,o,a,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,l=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,p=d&&(location.port||void 0),f={},m=e.config&&e.config()||{};return n={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var n=e.match(c);n&&(e=n[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,n,t;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(n=0;n<3;n+=1){t=r[n];try{e=new ActiveXObject(t)}catch(e){}if(e){r=[t];break}}return e},parseName:function(e){var n,t,i,o=!1,a=e.lastIndexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!r||a>1)?(n=e.substring(0,a),t=e.substring(a+1)):n=e,i=t||n,a=i.indexOf("!"),-1!==a&&(o="strip"===i.substring(a+1),i=i.substring(0,a),t?t=i:n=i),{moduleName:n,ext:t,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,i,o){var a,r,s,c=n.xdRegExp.exec(e);return!c||(a=c[2],r=c[3],r=r.split(":"),s=r[1],r=r[0],!(a&&a!==t||r&&r.toLowerCase()!==i.toLowerCase()||(s||r)&&s!==o))},finishLoad:function(e,t,i,o){i=t?n.strip(i):i,m.isBuild&&(f[e]=i),o(i)},load:function(e,t,i,o){if(o&&o.isBuild&&!o.inlineText)return void i();m.isBuild=o&&o.isBuild;var a=n.parseName(e),r=a.moduleName+(a.ext?"."+a.ext:""),s=t.toUrl(r),c=m.useXhr||n.useXhr;if(0===s.indexOf("empty:"))return void i();!d||c(s,l,u,p)?n.get(s,function(t){n.finishLoad(e,a.strip,t,i)},function(e){i.error&&i.error(e)}):t([r],function(e){n.finishLoad(a.moduleName+"."+a.ext,a.strip,e,i)})},write:function(e,t,i,o){if(f.hasOwnProperty(t)){var a=n.jsEscape(f[t]);i.asModule(e+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,t,i,o,a){var r=n.parseName(t),s=r.ext?"."+r.ext:"",c=r.moduleName+s,d=i.toUrl(r.moduleName+s)+".js";n.load(c,i,function(t){var i=function(e){return o(d,e)};i.asModule=function(e,n){return o.asModule(e,d,n)},n.write(e,c,i,a)},a)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(t=require.nodeRequire("fs"),n.get=function(e,n,i){try{var o=t.readFileSync(e,"utf8");"\ufeff"===o[0]&&(o=o.substring(1)),n(o)}catch(e){i&&i(e)}}):"xhr"===m.env||!m.env&&n.createXhr()?n.get=function(e,t,i,o){var a,r=n.createXhr();if(r.open("GET",e,!0),o)for(a in o)o.hasOwnProperty(a)&&r.setRequestHeader(a.toLowerCase(),o[a]);m.onXhr&&m.onXhr(r,e),r.onreadystatechange=function(n){var o,a;4===r.readyState&&(o=r.status||0,o>399&&o<600?(a=new Error(e+" HTTP status: "+o),a.xhr=r,i&&i(a)):t(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,e))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,n){var t,i,o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),"utf-8")),s="";try{for(t=new java.lang.StringBuffer,i=r.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&t.append(i);null!==(i=r.readLine());)t.append(a),t.append(i);s=String(t.toString())}finally{r.close()}n(s)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in i,n.get=function(e,n){var t,r,s,c={};a&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{t=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),t.init(s,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(t,"utf-8",t.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(t.available(),c),r.close(),t.close(),n(c.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),n}),define("text!mobile/tpl/ad_article.ejs",[],function(){return'<%\n  ads_flag = ads_flag || \'\';\n  flag_color = flag_color || \'#999\';\n%>\n<%if(template == 103) {%>\n  <div class="ad ad-103" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <img src="<%=image%>">\n      <div class="ad-title">\n        <span class="spread" style="color: <%=flag_color%>;border-color: <%=flag_color%>;"><%=ads_flag%></span>\n        <span class="right-arrow"></span>\n        <div class="title">\n          <%=title%>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<%} else if(template == 104){%>\n  <div class="ad ad-104" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <img src="<%=image%>">\n      <div class="ad-title"><%=title%></div>\n      <div class="ad-info">\n        <span class="spread" style="color: <%=flag_color%>;border-color: <%=flag_color%>;"><%=ads_flag%></span>\n        <span><%=source%></span>\n      </div>\n    </div>\n  </div>\n\n<%} else if(template == 108){%>\n  <div class="ad ad-108" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <img src="<%=image%>">\n    </div>\n  </div>\n<%} else if(template == 118){%>\n  <div class="ad ad-118" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <img src="<%=image%>">\n    </div>\n  </div>\n<%} else if(template == 128){%>\n  <div class="ad ad-128" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <div class="title"><%=title%></div>\n      <img src="<%=image%>">\n      <div class="ad-title">\n        <span class="spread" style="color: <%=flag_color%>;border-color: <%=flag_color%>;"><%=ads_flag%></span>\n        <span class="ad-btn"><%=buttonName%></span>\n        <div class="source">\n          <%=source%>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<%} else if(template == 113){%>\n  <div class="ad ad-113" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <img src="<%=image%>">\n      <div class="ad-title">\n        <span class="spread" style="color: <%=flag_color%>;border-color: <%=flag_color%>;"><%=ads_flag%></span>\n        <span class="right-arrow"></span>\n        <div class="title">\n          <%=title%>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<%} else if(template == 140 && image_urls.length >= 3){%>\n  <div class="ad ad-140" data-aid="<%=aid%>">\n    <div class="ad-link" data-href="<%=url%>">\n      <div class="ad-title">\n        <span class="spread" style="color: <%=flag_color%>;border-color: <%=flag_color%>;"><%=ads_flag%></span>\n        <span class="right-arrow"></span>\n        <div class="title">\n          <%=title%>\n        </div>\n      </div>\n      <div class="ad-images-wrapper">\n        <img src="<%=image_urls[0]%>">\n        <img src="<%=image_urls[2]%>">\n        <img src="<%=image_urls[1]%>">\n      </div>\n    </div>\n  </div>\n\n<%}%>'}),function(){define("ad_article",["zepto","ad","text!mobile/tpl/ad_article.ejs"],function(e,n,t){var i,o,a,r,s;return o=yidian.docinfo.doc.docid,r=yidian.docinfo.query.s||"",s=["1","2","3","4","5","6","7","8","9","10","11","12",""],yidian.docinfo.doc&&1===yidian.docinfo.doc.btype&&s.indexOf(r)>-1&&(e("#js-content").prepend("<div class='ad-wrapper btype-1 none-rendered' data-position='2'></div>"),e("#js-content").append("<div class='ad-wrapper btype-1 none-rendered' data-position='3'></div>")),a=function(n){var a;return a={ver:yidian.docinfo.query.ver||"",docid:o,wemediaid:yidian.docinfo.is_imedia?yidian.docinfo.related_wemedia.id:"",s:yidian.docinfo.query.s,position:n.attr("data-position")},yidian.docinfo.doc&&1===yidian.docinfo.doc.btype&&(a.btype=1),"mb"!==yidian.docinfo.query.s_real&&"oppobrowser"!==yidian.docinfo.query.s_real||(a.s=yidian.docinfo.query.s_real),n.removeClass("none-rendered"),e.get("/home/q/get_recommend_ads",a,function(o){var a;if(o&&0===o.code&&o.ads&&o.ads.length&&(o.ads[0].image||o.ads[0].image_urls)&&(o.ads[0].ads_flag=o.ads[0].ads_flag||"",o.ads[0].ads_flag=o.ads[0].ads_flag.trim().substring(0,2),o.ads[0].flag_color=o.ads[0].flag_color||"#999",a=ejs.render(t,o.ads[0]),n.html(a),e("body").hasClass("article_v2")&&e(".ad-wrapper").addClass("bottom-1px").addClass("top-1px"),e(".ad",n).data()))return e(".ad",n).data().adData=o.ads[0],i()})},i=function(){return e(".ad").each(function(){if(!e(this).closest(".ad-wrapper").hasClass("btype-1"))return n.exposure(e(this))})},window.onscroll=function(){return e(".ad-wrapper.none-rendered").each(function(){if(e("body").scrollTop()+e(window).height()>e(this).offset().top&&e("body").scrollTop()<e(this).offset().top+e(this).height())return a(e(this))}),i()},e(".ad-wrapper.none-rendered").each(function(){if(e("body").scrollTop()+e(window).height()>e(this).offset().top&&e("body").scrollTop()<e(this).offset().top+e(this).height())return a(e(this))}),e(".ad-wrapper").on("click",".ad-link",function(t){var i,o;return i=e(this).closest(".ad").data().adData,o=e(this).attr("data-href"),e(this).closest(".ad-wrapper").hasClass("btype-1")?location.href=o:(n.click(i),o&&n.landingPage(i,o),!1)})})}.call(this),function(e){define("zepto_carousel",["zepto"],function(){return function(){!function(e){e.extend(e.fn,{setCarousel:function(n){var t,i,o,a,r,s,c;n=e.extend(!0,{},{intevalTime:4400,autoPlay:!0,touchControl:!1,duration:1e3,dir:"rtl"},n),o=function(){return i=setInterval(function(){return t(n.dir)},n.intevalTime)},t=function(t){var i,o,a,r;t=t||n.dir,e("animation-fadein").removeClass("animation-fadein"),e("animation-fadeout").removeClass("animation-fadeout"),e(".animation-slideout-rtl").removeClass("active").removeClass("animation-slideout-rtl"),e(".animation-slideout-ltr").removeClass("active").removeClass("animation-slideout-ltr"),e(".animation-slidein-rtl").addClass("active").removeClass("animation-slidein-rtl"),e(".animation-slidein-ltr").addClass("active").removeClass("animation-slidein-ltr"),o=e(".carousel-item.active",s),i=e(".flag-wrapper .active",s),"rtl"===t?(a=o.next(".carousel-item").first(),r=i.next(".flag").first(),a.length||(a=e(".carousel-item",s).first(),r=e(".flag-wrapper .flag",s).first())):(a=o.prev(".carousel-item").first(),r=i.prev(".flag").first(),a.length||(a=e(".carousel-item",s).last(),r=e(".flag-wrapper .flag",s).last())),o.addClass("animation-slideout-"+t),a.addClass("animation-slidein-"+t),c=a.attr("data-index"),setTimeout(function(){s.trigger("carouselmid",c),i.removeClass("active"),r.addClass("active")},n.duration/2)},i=null,s=e(this),e(".carousel-item",s).addClass("animation").css("-webkit-animation-duration",n.duration/1e3+"s"),e(".carousel-item",s).each(function(n,t){e(this).attr("data-index",n)}),n.autoPlay&&o(),n.touchControl&&(a={},r=!1,s.on("touchstart",function(e){return a.x1=e.touches[0].clientX,a.y1=e.touches[0].clientY,r=!0}),s.on("touchmove",function(e){var s;if(a.x2=e.touches[0].clientX,a.y2=e.touches[0].clientY,r&&Math.abs(a.x1-a.x2)>10&&Math.abs(a.x1-a.x2)>Math.abs(a.y1-a.y2))return s=a.x1>a.x2?"rtl":"ltr",clearInterval(i),t(s),n.autoPlay&&o(),r=!1}))}})}(Zepto)}.apply(e,arguments)})}(this),define("deeplink",["require","exports","module"],function(e,n,t){var i=document.cookie.match(/(^|;\s*)wuid=([^;$]*)/),o=i&&i[2]||"",i=document.cookie.match(/(^|;\s*)wuid_createAt=([^;$]*)/),a=i&&i[2]||"";o&&a||(o=Math.floor(1e15*Math.random()),a=function(){var e,n,t,i,o,a,r;return e=new Date,r=e.getFullYear(),o=e.getMonth()+1,o=o<=9?"0"+o:o,n=e.getDate()<=9?"0"+e.getDate():e.getDate(),t=e.getHours()<9?"0"+e.getHours():e.getHours(),i=e.getMinutes()<9?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<9?"0"+e.getSeconds():e.getSeconds(),r+"-"+o+"-"+n+" "+t+":"+i+":"+a}(),document.cookie="wuid="+o+";domain=.yidianzixun.com;path=/;max-age=86400000",document.cookie="wuid_createAt="+a+";domain=.yidianzixun.com;path=/;max-age=86400000");var r={wuid:o,deep_message:{action_method:"CLICK_DOC",docid:""}},s={wuid:o,deep_message:{action_method:"OPEN_URL",url:""}},c={wuid:o,deep_message:{action_method:"CLICK_CHANNEL",channel_id:"",channel_name:"",channel_cover:"",channel_summary:"",channel_type:""}},d=null;t.exports={setDistributionMap:function(e){d=e,d.default=d.default||"webpages1"},download:function(e,n){if(!d)throw new Error("must use setDistributionMap to set distribution_map first!");var t=d[e]||d.default;n&&n.docid?(r.distribution_channel=t,r.deep_message.docid=n.docid,location.href="http://m.yidianzixun.com/deeplink/redirect?deep_data="+encodeURIComponent(JSON.stringify(r))):n&&n.url?(s.distribution_channel=t,s.deep_message.url=n.url,location.href="http://m.yidianzixun.com/deeplink/redirect?deep_data="+encodeURIComponent(JSON.stringify(s))):n?(c.distribution_channel=t,c.deep_message.channel_id=n.channel_id||"",c.deep_message.channel_name=n.channel_name||"",c.deep_message.channel_cover=n.channel_cover||"",c.deep_message.channel_summary=n.channel_summary||"",c.deep_message.channel_type=n.channel_type||"",location.href="http://m.yidianzixun.com/deeplink/redirect?deep_data="+encodeURIComponent(JSON.stringify(c))):location.href="http://download.yidianzixun.com"}}}),function(){define("download",["deeplink"],function(e){var n,t,i,o;return t=yidian.docinfo&&yidian.docinfo.doc&&yidian.docinfo.doc.docid||"",o=yidian.docinfo&&yidian.docinfo.query&&yidian.docinfo.query.s||"",n={default:"webpages1","doc-app":"webpages2","doc-app-sec":"webpages3","more-comments":"webpages4",image:"webpages5","scroll-download-tipA":"webpages6","video-bottom-banner":"webpages9","doc-video":"webpages10","video-more":"webpages11","picture-gallery":"webpages12","channel-subscribe":"webpages13","channel-banner":"webpages14","video-to-app":"webpages16","doc-hot-video":"webpages17","banner-default":"webpages18","banner-news-animate":"webpages19","news-test":"webpages20","sharev2-hot-doc":"webpages41","sharev2-relative-doc":"webpages42","sharev2-gif-doc":"webpages43","sharev2-video-doc":"webpages44","add-comment":"webpages21","scroll-download-tipB":"webpages22","scroll-download-tipC":"webpages23","joke-relative":"webpages24","joke-page":"webpages26","joke-comment":"webpages28","joke-like":"webpages29","picture-gallery-follow":"webpages30","channel-share":"webpages31","error-page":"webpages33","doc-subscribe-channel":"webpages35"},"sms"===o&&(n={default:"webpages37"}),e.setDistributionMap(n),i=function(n,i){return"jinli"===o&&yidian.docinfo.is_android?void(window.location.href="http://adres.myaora.net/function/download_apk.php?chl=aora_yidian&softid=37320"):(i||(i={docid:t}),e.download(n,i))},{redirectDownload:i}})}.call(this),function(){define("banner",["zepto","zepto_carousel","download"],function(e,n,t){var i,o,a,r,s,c;return yidian&&yidian.docinfo&&yidian.docinfo.doc&&(s=t.redirectDownload,o=yidian.docinfo.doc.docid,yidian.docinfo.query.s||"",yidian.docinfo.query.s_real||"",r=yidian.docinfo.page_config||"",yidian.docinfo.query.appid||"",i=yidian.docinfo.abtest||{},a=0,function(){var n,t,i,o;return o=0,n=e(".banner").height(),i=e(".container h3").length?e(".container h3")[0].offsetHeight+n+46:n+46,t="",e(window).on("touchstart",function(){var n;return n=e(this).scrollTop(),o=n,t=e(".content").height()+i}),e(window).on("touchend",function(){if(e(this).scrollTop()>t&&0===a&&e(".redpocket_btn").length&&"none"!==document.defaultView.getComputedStyle(e(".redpocket_btn").closest(".banner")[0],null).display)return e(".redpocket_tip").css("display","block").addClass("animated shake"),a=1})},e(".banner").length&&(e("body").addClass("hasbanner"),e("body").css("padding-bottom","0.5rem"),r&&r.banner&&"default1"===r.banner.type&&e(".plan-default1").length?(e(".banner").not(".plan-default1").remove(),e(".banner.plan-default1").css("display","block")):r&&r.banner&&"gov"===r.banner.type&&e(".plan-gov").length?(e(".banner").not(".plan-gov").remove(),e(".banner.plan-gov").css("display","block")):r&&r.banner&&"video"===r.banner.type&&e(".video-bottom-banner").length?(3===i.Download_Banner_Test.download_banner_test&&e(".banner.planA").length?e(".banner").not(".planA").remove():e(".banner.planA").remove(),e(".video-bottom-banner").css("display","block")):r&&r.banner&&"joke"===r.banner.type&&e(".joke-banner").length?(3===i.Download_Banner_Test.download_banner_test&&e(".banner.planA").length?e(".banner").not(".planA").remove():e(".banner.planA").remove(),e(".joke-banner").css("display","block")):i.Download_Banner_Test&&3===i.Download_Banner_Test.download_banner_test&&e(".banner.planA").length?e(".banner").not(".planA").remove():e(".plan-default").length&&(e(".banner").not(".plan-default1").remove(),e(".banner.plan-default1").css("display","block"))),c=function(n){var t,i,a,r,s,c;if(e(".banner").hasClass("planA")){for(a="",i="<div class='carousel-item' data-docid='"+o+"'> <div class='leftSide'> <div class='img logo'></div> <h3 class='title'></h3> <h4 class='subTitle'></h4> </div> <span class='greenBtn'></span> </div>",s=0,c=n.length;s<c;s++)r=n[s],t=r.docimg?"<img src="+r.docimg+">":r.upload_images&&r.upload_images.length?"<img src='http://i1.go2yd.com/image.php?url="+r.upload_images[0]+"&type=thumbnail_285x180'>":r.image?"<img src='http://i1.go2yd.com/image.php?url="+r.image+"&type=thumbnail_285x180'>":"",a+="<div class='carousel-item' data-docid="+r.docid+"> <div class='leftSide'> "+t+" <h3 class='title long-title'>"+r.title+"</h3> </div> <span class='greenBtn'></span> </div>";if(e(".banner.planA").html(i+a),e(".banner.planA .carousel-item").first().addClass("active"),e(".banner.planA").css("display","block"),n.length>1)return e(".banner.planA").setCarousel({intevalTime:3500,autoPlay:!0,touchControl:!0,duration:1e3,dir:"rtl"})}},e(".banner").on("click",function(n){var t;return n.preventDefault(),e(this).hasClass("video-bottom-banner")?e(this).hasClass("planA")?(t=e(n.target).closest(".carousel-item").attr("data-docid"),s("video-bottom-banner",{docid:t})):s("video-bottom-banner"):e(this).hasClass("joke-banner")?e(this).hasClass("planA")?(t=e(n.target).closest(".carousel-item").attr("data-docid"),s("joke-page",{docid:t})):s("joke-page"):e(this).hasClass("plan-gov")?s("banner-gov"):e(this).hasClass("planA")?(t=e(n.target).closest(".carousel-item").attr("data-docid"),e("body").hasClass("article_v2")?s("news-test",{docid:t}):s("banner-news-animate",{docid:t})):s(e("body").hasClass("article_v2")?"news-test":"banner-default")})),{renderPlanA:c}})}.call(this),function(){define("image",["zepto","util","download"],function(e,n,t){var i,o,a,r,s,c,d,l,u,p,f,m,h;return yidian.docinfo.abtest||{},p="wifi",yidian.docinfo.page_config.save_network_traffic&&"wifi"!==p&&"unknown"!==p&&(p="3g"),
o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAALEwAACxMBAJqcGAAABCRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjE8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjYwPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42MDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDctMjNUMTY6MDc6Nzk8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMi4yLjE8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cop133YAAAY/SURBVGgF1ZptiBR1HMdv79QzKi7pSbAjTHqwyF5JgortnqapRw8QGfQiyLQsK7CgXgTVi6IyxIoyS0PqVaatWUGWRaYFdd51CWVar3qguoz0ejhN3T7fbWacnZ2Zndl53D989/ef/+Pvs/+nmdkttCUYKpXKOJqfiC5B09EFSGkT0EnoJ/QbGkI70SDah34oFArHsLGHQtwtAjmJNktoBprK9TnYU1GQ8C+FDgD7FfZT9CH6jOthbCwhFmCgxuLNXHQD6uH6rFi8a2s7Cuwe2iqj14jvjand5poBrBNdjz46/n+oYBIRfQyh1UjLI/1AxzPR+0kB+rQr8EfQ6alQ01EXegKHhn2cSmSUHf0N4MeVYaFDrWE6uIwOVmGLYTtKqPyfrOtH5RN2JEgfgYGBXICep9HuIA2nWQbYV+lvGbbhbh4IGFBtTGtp9LQ0QcL0BewWyi/B/upXryGwYGlgPfYUv4bykAfsu/ixCPuHlz/tXhlKB1LTeG0rwBr+6l5gDf6erGu34AlMpUvRC1TK7TR2A8Jn3fw85JanNNcpTSVBlrGzvCrmPP0I0/omtNHpp9cIP9DCsGIcg/9PIt3X14Q6YArNQMtqSrXmxbm4/SAsNbO4BphMPQQ8jJrZkXUTsJW6v6NcBHgW4UiP3ZkaYDJ6KVS0FwgRP0zZe4AuofXED4aom1TRThq+D6YxZgcWMIl6IF+OaqaAWTCAVb0OYAfRLWgWehFlCm4MoDWIFjDOziFTbyWiBOvLAlTgS2jsCoFjD0VpOELd0dRdCluVtfrBhRy9Edm/gAh9nKgK7BcCR9URJ8fzLuhErXhj8JVo8SK1agJOJF6zuJUZZ7CBa43rvjxN8C76WyAeE7jEt3CmEpIOwA6gpagHvUR/aYHPh3G0CTwzaVBn+8D2o1sN8HXkJ7256dVQdzvUuo2c6nQorWsDfDFWa3wNSmTE4TwDpqJG+DwuMn+oB1S7+u34I3Ct8bhHXBvzNQK+GHk+TpGXagD2S6Q1bh5ncYJPE7DWr3V+pkrn0xnA5nFWJK5zPPJU17QW8Pk+/WaeBax2dZ3jRRR5VxfwuMypAjgArEbc3NWbBhfwhAD95aYI0OZxphuY53DsQBjnBKyHhpYLwA7gdBnr+5bSCSbgH52Jeb5m4xmF5qK30Ntochh/R1FYv89eGKZSFmUBk6+z0R3E9ROL9Ywbxh818kuYCmmXNUD1YCPQeVg97jUdNKU/brp2ghWB6zBGcjP2TdRLd5FgWe8jGuFBdAQ1NUWoF2sATIOgEb2LuF6sR4J0ONcv4H1oCGV6PBmgRfxYTlzPrvIt7rBNjf7MUO+hk0yA6bcDH2YjgWpEkwCl2eorpnI7sMe42KWUNANwOl60CekXjq0oqVGtYsH5HZH9Wi8K21GgH5SrpSN8GKA6Vt4grs1oIfE416mXd9uB/tucPrpd203n071KR02nbXPq6njR1E1zk9Q787IYqsDAHsaJTVzHDmyAate9k3jkc1ROhw3wfU6d3apnTmnFXyfje0XiCMDp9dEc2tIa1S1g5HM0gl/rYKsuWQvYgNVjV5SgmSJQjaQ2oneQ1qi5dKK03VRduPSQsdmsbAEbCS9jo4yyQM07o/nEMwM1eGSeBtr61aPu1Q4jorX2jK1C0Ohxo6DzSwxaP/ZygOr0WYi1TiA3YD0f69GrFLsH6TY4DOg89Im927rRoMA/FLgX5fopyg7hFofjMSesytUBK5GCenF2P9Gjum61gO/apFa5+e0KbBTcQMWn3CrlPE3n7d34bq1bu791a9ieyTru5PpZ7GJ7el7jQH6Db1cb1tVNvxHW1Db/xrDBtXaOEvH1a9zRX5UE7Rl8gVWLBv7C3IZd7dlKxhn4pml8HbavkSsNgdUADWk9rMCuwFqHuPKyDvi0CR8EuzeIL75r2K0Bnc9IO+AUt/wU0w4B+Tj9rcTqFVVyAeDxaCX/UD/o+Jd6Gv+Ep+vKeyj2J7uG3xidXo42Aj2SBjh99aGb0diGziVZAAf0d8VX0FAC4CO0uwMJtCsqR+g17NchDk0i/yrUi6ZwfTa2mT60Pr+l7gdIbyr6uNYRGTk040zDTgHV7t+N9Pfja9E00sZjPQNAOgn60Ta0Be0nTUdirOE/6nvkPaUZG70AAAAASUVORK5CYII=",e("#js-article").length&&(i=document.getElementById("js-article").getBoundingClientRect().width),m=t.redirectDownload,h=function(e,n){var t,o,a,r;return r=n.width,t=n.height,"number"!=typeof r||"number"!=typeof t?(e.width("auto").height("auto"),n.autoWidthHeight=!0):(a=Math.min(i,r),o=Math.ceil(a*t/r),n.show_low_quality&&(a=Math.min(parseInt(i/2),parseInt(r/2)),o=Math.ceil(a*t/r)),e.width(a).height(o))},c=function(){var n,t,a,r,s,c,d,l;for(n=e("#js-content").find(".a-image"),a=yidian.docinfo.doc.images,i,l=[],t=c=0,d=n.length;c<d;t=++c)r=n[t],s=a[t],"3g"===p&&(e(r).addClass("low-quality"),s.show_low_quality=!0),h(e(r),s),e(r).attr("data-index",t).addClass("none-loaded"),a[t].animated?(e(r).addClass("a-image-gif"),l.push(e(r).append("<div class='gif-play'><img src="+o+" />GIF</div>"))):l.push(void 0);return l},l=function(n,t){var i,o,a,r;return r=t.width,o=t.height,t.animated?(i=t.url+"&net="+p+(t.autoWidthHeight?"":"&type=thumbnail_"+r+"x"+o),n.css({"background-image":"url("+i+")","background-size":"cover"})):(a=t.url,t.show_low_quality&&(a+="&net=3g"+(t.autoWidthHeight?"":"&type=thumbnail_"+parseInt(r/2)+"x"+parseInt(o/2))),n.append("<img src='"+a+"'>"),e("img",n).one("load",function(n,t){return function(){return e(window).trigger("image:loaded",[n,t])}}(n,t))),n.removeClass("none-loaded").addClass("loaded")},u=function(n,t){return t.show_low_quality=!1,n.removeClass("low-quality"),t.animated?h(n,t):n.hasClass("none-loaded")?h(n,t):e("img",n).attr("src",t.url).one("load",function(n,t){return function(){return h(n,t),e(window).trigger("image:loaded",[n,t])}}(n,t))},d=function(){return e("body").scrollTop(),e(window).height(),e("#js-content .none-loaded").each(function(){var n,t;return n=e(this).data("index"),t=yidian.docinfo.doc.images[n],l(e(this),t)})},r=function(){return e("#js-article").on("click",".a-image",function(n){var t,i;return t=e(this).data("index"),i=yidian.docinfo.doc.images[t],i.show_low_quality&&u(e(this),i),i.animated&&!e(this).children("img").length&&(e(this).children(".gif-play").css({display:"none"}),e(this).append("<img src='"+i.url+"'>")),e(".a-image-gif").not(e(this)).each(function(){return e(this).children("img").remove(),e(this).children(".gif-play").show()})})},s=function(){return e(window).on("image:loaded",function(n,t,i){if(yidian.docinfo.page_config.guide_download&&!t.closest('[data-yd-type="advertorial-ad-tpl"]').length)return i.show_low_quality?void 0:(t.addClass("image-backflow-1").append("<i class='image-backflow-tip-1'></i>"),t.click(function(){return m(e("body").hasClass("article_v2")?"news-test":"image")}))})},setTimeout(function(){return e("img[data-src]").each(function(n,t){return e(t).attr("src",""+e(t).data("src"))})},500),e("*[data-bgsrc]").each(function(n,t){return e(t).css("background-image","url("+e(t).data("bgsrc")+")")}),a=yidian.docinfo.doc.images,e("#js-article").length&&(i=document.getElementById("js-article").getBoundingClientRect().width,f=.585*i,c(),d(),r(),s(),e(window).on("scroll",function(){return d()}),"3g"===p&&e(".a-image").length&&e(".js-meta").after("<div class='show-original-img'></div>"),e(".show-original-img").click(function(){return e(this).hide(),e(".low-quality").each(function(){var n,t;return n=e(this).data("index"),t=yidian.docinfo.doc.images[n],u(e(this),t)})}),e("#js-content .picture-gallery").each(function(n,t){var i,o,r;return i=a[3*n].url+"&type=thumbnail_400x400",o=a[3*n+1].url+"&type=thumbnail_548x386",r=a[3*n+2].url+"&type=thumbnail_548x386",e(this).find(".picture-gallery-images").html("<div class='picture-gallery-images-content'><img src='"+i+"' style='height:"+f+"px' class='js-first'><img src='"+o+"'><img src='"+r+"'></div><span class='corner'></span>")}),e("#js-content").on("click",".picture-gallery",function(e){return m("picture-gallery")}),e(window).resize(function(){var n,t,o,r,s,c;for(i=document.getElementById("js-article").getBoundingClientRect().width,n=e("#js-content").find(".a-image"),a=yidian.docinfo.doc.images,t=s=0,c=n.length;s<c;t=++s)o=n[t],r=a[t],h(e(o),r);return f=.585*i,e(".picture-gallery .js-first").height(f)})),{setImgSize:h,initImgWrapper:c,loadImg:l,lazyLoadImg:d,loadOriginImg:u,imgClick:r,imgClickBackFlow:s}})}.call(this),function(){define("share",["zepto","query","log","util"],function(e,n,t,i){var o,a,r,s,c,d,l,u,p,f,m,h,g,v;return g=location.href,f=g.match(/share_count=(\d+)/),f?g=g.replace(f[0],"share_count="+(Number(f[1])+1)):-1!==g.indexOf("?")?g+="&share_count=2":g+="?share_count=2",yidian&&yidian.docinfo&&yidian.docinfo.doc&&(r=yidian.docinfo.doc.docid,u=yidian.docinfo.query.s||"",yidian.docinfo.query.s_real||"",o=yidian.docinfo.query.appid||"",c=yidian.docinfo.is_weixin,1===e("#doc1").size(),v="lastmile"===yidian.docinfo.query.appid?yidian.docinfo.doc.title+"":yidian.docinfo.doc.title+"",m=yidian.docinfo.doc.summary||"",m.length>80&&(m=m.slice(0,80)+"..."),m||(m="lastmile"===yidian.docinfo.query.appid?" -   ":" - "),h="http://staticimg.yidianzixun.com/img/logo_1024.png","lastmile"===yidian.docinfo.query.appid&&(h="http://staticimg.yidianzixun.com/img/lastmile.png"),yidian.docinfo.docimg&&(h=yidian.docinfo.docimg)),s=function(e){return wx.config({debug:!1,appId:e.appid,timestamp:e.timestamp,nonceStr:e.noncestr,signature:e.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){return p()}),wx.error(function(){})},p=function(){return wx.onMenuShareAppMessage({title:v,desc:m,link:g,imgUrl:h,type:yidian.docinfo.doc.is_video?"video":"link",success:function(){return t.sendLogOffline({action_method:"SHARE_DOC",target_id:"WEIXIN_FRIENDS",action_times:1}),d()}}),wx.onMenuShareTimeline({title:v,desc:m,link:g,imgUrl:h,success:function(){return t.sendLogOffline({action_method:"SHARE_DOC",target_id:"WEIXIN_MOMENTS",action_times:1}),d()}}),wx.onMenuShareQQ({title:v,desc:m,link:g,imgUrl:h,success:function(){return t.sendLogOffline({action_method:"SHARE_DOC",target_id:"QQ",action_times:1}),d()}}),wx.onMenuShareWeibo({title:v,desc:m,link:g,imgUrl:h,success:function(){return t.sendLogOffline({action_method:"SHARE_DOC",target_id:"WEIBO",action_times:1}),d()}}),wx.onMenuShareQZone({title:v,desc:m,link:g,imgUrl:h,success:function(){return t.sendLogOffline({action_method:"SHARE_DOC",target_id:"QQ_SPACE",action_times:1}),d()}})},c&&"object"==typeof wx&&setTimeout(function(){return e.get("/home/q/wxapi?url="+encodeURIComponent(window.location.href),function(e){if(e&&"success"===e.status)return s(e.result)})},300),a=null,e(window).on("news:ajaxCallback",function(e,n){if(n&&n.big_picture_docs)return a=n.big_picture_docs}),d=function(){if("picture_gallery"!==yidian.docinfo.doc.ctype)return yidian.docinfo.doc.is_gov||yidian.docinfo.doc.b_political||3===yidian.docinfo.related_wemedia.source_type?a?l(a):n.getRelatedNews(r,0,0,function(e){if(e&&e.big_picture_docs&&(a=e.big_picture_docs),a)return l(a)}):n.getRelatedNews(r,17,3,function(n){var t,i,a,r,s,c,d,l;if(n&&"success"===n.status&&n.documents.length>0){for(a="<div class='share-title'><i class='close-icon'></i></div><p class='share-sec-title'></p>",l=n.documents,r=c=0,d=l.length;c<d;r=++c)t=l[r],i="/article/"+t.docid+"?s="+u+"&appid="+o,s=t.docimg||t.upload_images?"<img src="+(t.docimg||t.upload_images[0])+" class='doc-image-small' />":"",a+="<a class='doc sharePop-doc' href="+i+" data-index="+r+" data-docid="+t.docid+"> "+s+" <div class='doc-content'> <div class='doc-title'>"+t.title+"</div> </div> <div class='doc-info'> <span class='doc-info-item doc-info-source'>"+t.source+"</span> <span class='doc-info-item'>"+t.date+"</span> </div> </a>";return e(".share-window").html(a),e(".window-cover").css("display","block")}})},l=function(n){var t,a,r,s,c,d,l,p;if(n&&n.length){for(s=c=0,l=n.length;c<l&&(t=n[s],!t.upload_images||!t.upload_images[0]);s=++c);if(n=n.slice(s,2),n.length){for(r="<div class='share-title'><i class='close-icon'></i></div>",s=d=0,p=n.length;d<p;s=++d)t=n[s],a="/article/"+t.docid+"?s="+u+"&appid="+o,r+="<a class='doc' href="+a+" data-index="+s+" data-docid="+t.docid+"> <img src="+(0===s?t.upload_images[0]:"http://i1.go2yd.com/image.php?url="+t.image_urls[0]+"&type=thumbnail_200x150")+" class='doc-image-small "+(0===s?"bigimg":"")+"' /> <div class='doc-content'> <div class='doc-title'>"+t.title+"</div> </div> <div class='doc-info bigimg-doc-info'> <span class='doc-info-item doc-info-source'>"+t.source+"</span> <span class='doc-info-item'>"+i.formate_date(t.date)+"</span> </div> </a>";return e(".share-window").html(r),e(".window-cover").css("display","block")}}},e("body").on("click",".close-icon",function(n){return e(".window-cover").css("display","none")}),{big_picture_docs:a,renderSecondShare:d}})}.call(this),function(){define("personal_point",["zepto","query"],function(e,n){var t,i;return i=function(){var n,t;return t=yidian.docinfo.doc.up||0,n=yidian.docinfo.doc.down||0,e(".up").html("<b>"+t+"</b>"),e(".down").html("<b>"+n+"</b>")},t=function(t,i,o){if(e("a.praise b").text(t),e("a.stamp b").text(i),yidian.docinfo.is_login){if("00"===o)return n.addUp(docid);if("10"===o)return n.addDown(docid)}},i(),e("a.praise").on("click",function(n){var i,o;return e(this).hasClass("active")?(e(this).removeClass("active"),o=yidian.docinfo.doc.up||0,i=yidian.docinfo.doc.down||0,t(o,i,"01")):(e(this).addClass("active"),e(this).siblings(".stamp").removeClass("active"),o=yidian.docinfo.doc.up||0,i=yidian.docinfo.doc.down||0,o++,t(o,i,"00"))}),e("a.stamp").on("click",function(n){var i,o;return e(this).hasClass("active")?(e(this).removeClass("active"),o=yidian.docinfo.doc.up||0,i=yidian.docinfo.doc.down||0,t(o,i,"11")):(e(this).addClass("active"),e(this).siblings(".praise").removeClass("active"),o=yidian.docinfo.doc.up||0,i=yidian.docinfo.doc.down||0,i++,t(o,i,"10"))})})}.call(this),define("text!mobile/tpl/comments.ejs",[],function(){return"<%\n/*\nrenderData:\n  Array comments: \n  String s: s\n*/\n%>\n\n<% if(comments.length) {%>\n    <% var replymax = ((s == 'oppobrowser') ? 3 : 2) %>\n    <% for(var i=0; i<comments.length; i++) {%>\n        <% var comment = comments[i] %>\n        <% var has_more_reply_class =  (comment.replies && comment.replies.length > replymax) ? 'has-more' : ''%>\n        <% var praise_class = (comment.is_praised ? 'active' : '') %>\n\n        <div id='comment-<%=comment.comment_id%>' class='comment' data-commentid='<%=comment.comment_id%>' data-nickname='<%=comment.nickname%>'>\n\n        <% if(s == 'mb') {%>\n            <img src='<%=comment.profile%>' class='profile' />\n            <div class='comment-info'>\n                <% if(comment.mine) {%>\n                    <a class=\"del-comment\"></a>\n                <%} else {%>\n                    <div class='add-praise <%=praise_class%>'>\n                        <span class='praise-count'><%=comment.like || 0%></span>\n                        <span class='img add-praise-img'></span>\n                    </div>\n                    <span class='add-comment'></span>\n                <%} %>\n                <span class='comment-nick'><%=comment.nickname%>:</span>\n                <div class='comment-date'><%=comment.createAt%></div>\n                <p class='comment-content'><%=comment.comment%></p>\n\n        <%} else if(s == 'oppobrowser') {%>\n            <img src='<%=comment.profile%>' class='profile' />\n            <div class='comment-info'>\n                <% if(comment.mine) {%>\n                    <a class=\"del-comment\"></a>\n                <%} else {%>\n                    <div class='comment-action'>\n                        <span class='add-praise praise-count <%=praise_class%>'><%=comment.like%></span>\n                        <span class='add-praise add-praise-img <%=praise_class%>'></span>\n                        <span class='img add-comment'></span> \n                    </div>\n                <%} %>\n                <span class='comment-nick'><%=comment.nickname%></span>\n                <div class='comment-date'><%=comment.createAt%></div>\n                <p class='comment-content'><%=comment.comment%></p>\n\n        <%} else {%>\n            <img src='<%=comment.profile%>' class='profile' />\n            <div class='comment-info'>\n                <% if(comment.mine) {%>\n                    <a class=\"del-comment\"></a>\n                <%} else {%>\n                    <div class='add-comment'>\n                        <% var replycount = comment.reply_n || 0%>\n                        <span class='img add-comment-img <%=praise_class%>'></span>\n                    </div>\n                    <div class='add-praise <%=praise_class%>'>\n                        <span class='praise-count'><%=comment.like || 0%></span>\n                        <span class='img add-praise-img'></span>\n                    </div>\n                <%} %>\n                <span class='comment-nick'><%=comment.nickname%></span>\n                <p class='comment-content'><%=comment.comment%></p>\n                <p class=\"one-reply-detail\">\n                    <span class=\"one-reply-date\"><%=comment.createAt%></span>\n                    <span class=\"one-reply-count\"><%=replycount%></span>\n                </p>\n        <%} %>\n\n        <% if(comment.replies && comment.replies.length && (s === 'oppobrowser' || s === 'mb')) {%>\n                <div class='replies <%=has_more_reply_class%>' id=\"replies-<%=comment.comment_id%>\">\n            <% var repliers = {} %>\n            <% for(var j=0; j<comment.replies.length && j < replymax; j++) {%>\n                <% var reply = comment.replies[j] %>\n                <% repliers[reply.reply_id] = reply.nickname %>\n\n                <% if(reply.reply_to === comment.comment_id) {%>\n                    <p id='reply-<%=reply.reply_id%>' class='reply-item' data-replyid='<%=reply.reply_id%>' data-replyname='<%=reply.nickname%>'> \n                        <span class='reply-name'><%=reply.nickname%>: </span>\n                        <span class='reply-comment'><%=reply.comment%></span>\n                    <% if(reply.mine) {%>\n                            <a class='remove-reply'></a>\n                    <%} %>\n                        </p>\n                <%} else {%>\n                    <p id='reply-<%=reply.reply_id%>' class='reply-item' data-replyid='<%=reply.reply_id%>' data-replyname='<%=reply.nickname%>'> \n                        <span class='reply-name'><%=reply.nickname%>: </span>\n                        <span></span>\n                        <% var reply_name =  repliers[reply.reply_to] || ''%>\n                        <span class='reply-name'><%=reply_name%>: </span>\n                        <span class='reply-comment'><%=reply.comment%></span>\n                    <% if(reply.mine) {%>\n                        <a class='remove-reply'></a>\n                    <%} %>\n                      </p>\n                <%} %>\n            <%} %>\n\n            <% if(s === 'oppobrowser') {%>\n               <% var text = '' %>\n            <%} else if(s === 'mb'){%>\n               <% var text = ''+comment.replies.length+'>' %>\n            <%} else {%>\n                <% var text = '...' %>\n            <%} %>\n                    <div class='expand'><%=text%></div>\n                    <div class='back'></div>\n                </div>\n         \n        <%} %>\n          </div>\n      </div>\n    <%}%>\n<%} %>\n"}),function(){define("hot_comments",["zepto","query","util","download","text!mobile/tpl/comments.ejs"],function(e,n,t,i,o){var a,r,s,c,d,l,u,p,f,m,h,g,v,y,_,w,b,x,C;return C=e(window).height(),m=yidian.docinfo.page_config||{},_=yidian.docinfo.query.s||"",d=yidian.docinfo.query.appid||"",f="/login?appid="+d+"&s="+_+"&redirect_uri="+encodeURIComponent(location.href),l=yidian.docinfo.doc.docid,h=i.redirectDownload,setTimeout(function(){if((e(".hot-comments").length||e(".joke-comment").length)&&y(),m.modules.indexOf("addComment")>-1)return e("#add-comment").html("<div class='add-docComment'><span></span></div>")},0),x=function(){return e(".tips").css({display:"inline-block"}),setTimeout(function(){return e(".tips").hide()},1e3)},r=null,function(){var e,n;e={},n=(document.cookie.match(/(^|.*;)JSESSIONID=(.*?)(;.*|$)/)||[])[2]||"guest",localStorage["oppo_comments_"+n]&&(e=JSON.parse(localStorage["oppo_comments_"+n])),r={setCommentPraise:function(t,i){return i?e["is_praised_"+t]=i:delete e["is_praised_"+t],localStorage["oppo_comments_"+n]=JSON.stringify(e)},getCommentPraise:function(n){return e["is_praised_"+n]||!1}}}(),yidian.appSendComment=function(e,n){return c(e,n)},a=m.add_comment?5:2,s=2,y=function(){return n.getComments(l,function(n){var i,s,c,d,l,u,p,f,h,g,v,y,w,b;if(n=n||{},n.hot_comments)for(y=n.hot_comments,u=0,h=y.length;u<h;u++)i=y[u],i.is_praised=r.getCommentPraise(i.comment_id),i.is_praised&&(i.like=i.like>0?i.like:1);if(n.comments)for(w=n.comments,p=0,g=w.length;p<g;p++)i=w[p],i.is_praised=r.getCommentPraise(i.comment_id),i.is_praised&&(i.like=i.like>0?i.like:1);if(n.hot_comments&&n.hot_comments.length){for(n.hot_comments.length=Math.min(a,n.hot_comments.length),d={comments:n.hot_comments||[],s:_},b=d.comments,f=0,v=b.length;f<v;f++)c=b[f],c.createAt=t.formate_date(c.createAt);return m.content&&"joke"===m.content.type?(l="<span>"+n.hot_comments[0].nickname+"</span>"+n.hot_comments[0].comment,e(".joke-comment").html(l).show()):(s=ejs.render(o,d),e(".hot-comments").show(),e(".show-comments").show().prepend(s),e(".comment-content").each(function(){var n,t;if(t=e(this),n=t.css("line-height").split("px")[0],t.height()>3.4*n)return t.addClass("long-comment-content"),t.after('<a href="javascritp:;" class="comment-link"></a>')}))}if(m.guide_download)return e(".hot-comments").show().html("<div class='more-comments-btn download'>^_^</div>")})},v=function(n){var t;return t=e("#replies-"+n),function(e,n){var i,o,a,r,c,d,l;if("success"===n.status){for(r=n.comment.replies||[],a={},d=0,l=r.length;d<l;d++)c=r[d],a[c.reply_id]=c.nickname;if(o={replies:r,repliers:a,comment_id:e},i=ejs.render(repliesTpl,o),t.find(".reply-item").remove(),t.prepend(i),t.removeClass("has-more").removeClass("expanded"),r.length>s)return t.addClass("expanded")}}},c=function(t,i){return n.addComment(l,i,t,function(n){var i,a,r,c,d,l;if("success"===n.status)t?(a=null,e("#comment-"+t).length?(a=e("#replies-"+t),r=Number(e("#comment-"+t).find(".reply-count").text())+1,l={replies:[n.comment],comment_id:t,repliers:{}},d=ejs.render(repliesTpl,l),e("#replies-"+t).length?e("#replies-"+t).prepend(d):e("#comment-"+t).find(".comment-info").append("<div class='replies' id='replies-"+t+"'>"+d+"</div>"),e("#comment-"+t).find(".reply-count").text(r)):e("#reply-"+t).length&&(i=e("#reply-"+t).closest(".comment"),a=e("#reply-"+t).closest(".replies"),r=Number(i.find(".reply-count").text())+1,c=i.attr("data-commentid"),l={replies:[n.comment],comment_id:c,repliers:{}},l.repliers[t]=e("#reply-"+t).attr("data-replyname"),d=ejs.render(repliesTpl,l),e("#reply-"+t).after(d),i.find(".reply-count").text(r)),a.find(".reply-item").length>s&&!a.hasClass("has-more")&&a.addClass("expanded"),e(".tips").text("")):(l={s:_,comments:[n.comment]},d=ejs.render(o,l),e(".show-comments").show().prepend(d),e(".no-comments").hide(),e(".tips").text(""));else{if(n&&(35===n.code||33===n.code))return location.href=f;t?e(".tips").text(""):e(".tips").text("")}return x()}),p()},w=function(){return e(window).unbind("hashchange"),e("p.reply-title").text(""),e(".comment-reply").attr("data-commentid",void 0),e(".mask").css("display","block"),e(".reply-content").val(""),e(".comment-reply").css({display:"block",bottom:"0px"}),e(".btn").attr("disabled","disabled"),e(".btn").css({background:"#999"}),location.hash="write_comments",setTimeout(function(){return e(window).bind("hashchange",p)},1e3),e("body").bind("touchmove",g)},b=function(n,t){return e(window).unbind("hashchange"),e("p.reply-title").text(""+t),e(".comment-reply").attr("data-commentid",n),e(".mask").css({display:"block"}),e(".reply-content").val(""),e(".comment-reply").css({display:"block",bottom:"0px"}),e(".btn").attr("disabled","disabled"),e(".btn").css({background:"#999"}),location.hash="write_reply",setTimeout(function(){return e(window).bind("hashchange",p)},1e3),e("body").bind("touchmove",g)},g=function(e){return e.preventDefault()},p=function(){return e(".mask").hide(),e(".comment-reply").hide(),e("body").unbind("touchmove")},function(n){var t;if(t=e(n.target),0===t.closest(".comment-reply").length)return p()},u=function(){return setTimeout(function(){return Math.abs(e(window).height()-C)<100?e(".comment-reply").css({bottom:"200px"}):e(".comment-reply").css({bottom:"0px"})},500)},e(".hot-comments").on("click",".crap-sofa",function(e){if(!m.add_comment)return h("add-comment")}),e(".show-comments").on("click",".expand",function(t){var i;return i=e(this).closest(".comment").attr("data-commentid"),n.getMoreReplies(i,v(i))}),e(".show-comments").on("click",".back",function(n){return e(this).siblings(".reply-item").slice(s).remove(),e(this).closest(".replies").removeClass("expanded").addClass("has-more")}),e(".show-comments").on("click",".comment-content, .reply-comment",function(){if(m.guide_download)return e(".comment-to-app").css("display","block")}),e(".comment-to-app").on("click",function(){return e(this).css("display","none")}),e(".comment-to-app").on("click","p",function(e){return e.preventDefault(),h("add-comment")}),e(".show-comments").on("click",".remove-reply",function(t){var i,o,a,r;if(yidian.docinfo.is_login)return i=e(this).closest(".reply-item"),e(this).closest(".comment").attr("data-commentid"),o=e(this).closest(".comment").find(".reply-count"),a=Number(o.text())-1,r={docid:l,reply_id:i.attr("data-replyid")},n.delComment(r,function(n){return n&&"success"===n.status?(i.siblings(".reply-item").length||i.closest(".replies").hasClass("has-more")||i.closest(".replies").remove(),i.siblings(".reply-item").length===s&&i.closest(".replies").hasClass("expanded")&&i.closest(".replies").removeClass("expanded"),i.remove(),e(".tips").text(""),o.text(a)):e(".tips").text(""),x()})}),e(".show-comments").on("click",".del-comment",function(t){var i,o,a;if(yidian.docinfo.is_login)return i=e(this).closest(".comment"),o=i.attr("data-commentid"),a={docid:l,comment_id:o},n.delComment(a,function(n){return"success"===n.status?(i.remove(),e(".tips").text(""),e(".show-comments").find(".comment").length||(e(".show-comments").hide(),e(".no-comments").show())):e(".tips").text(""),x()})}),e(".hot-comments").on("click",".more-comments-btn",function(e){return m.add_comment?location.href="/comments/"+l+"?s="+_+"&appid="+d:h("more-comments")}),e(".show-comments").on("click",".add-praise",function(t){var i,o,a,s;return i=e(this).closest(".comment").attr("data-commentid"),a=e(this).find(".praise-count"),o=parseInt(a.text()),s=parseInt(a.attr("data-realnum")),e(this).hasClass("active")?(e(this).removeClass("active"),s?(s>1e4?a.text("9999+"):a.text(o-1),a.attr("data-realnum",s-1)):a.text(o-1),r.setCommentPraise(i,null)):(e(this).addClass("active"),s?(s>9998?a.text("9999+"):a.text(o+1),a.attr("data-realnum",s+1)):a.text(o+1),yidian.docinfo.is_login&&n.addUpToComment(i),r.setCommentPraise(i,!0))}),e(".add-docComment").on("click",function(e){return m.add_comment?yidian.docinfo.is_login?w():location.href=f:h("add-comment")}),e(".mask").on("click",function(e){return p()}),e(".show-comments").on("click",".reply-item",function(n){var t,i;if(m.add_comment)return yidian.docinfo.is_login?!!e(this).find(".remove-reply").length||(i=e(this).attr("data-replyid"),t=e(this).attr("data-replyname"),b(i,t)):location.href=f}),e(".show-comments").on("click",".add-comment",function(n){var t,i;if(m.guide_download)return m.add_comment?yidian.docinfo.is_login?(i=e(this).closest(".comment").attr("data-nickname"),t=e(this).closest(".comment").attr("data-commentid"),b(t,i)):location.href=f:h("add-comment")}),e(".show-comments").on("click",".comment-link, .one-reply-count",function(n){if(n.preventDefault(),e(this).closest(".comment").attr("data-commentid"),m.guide_download)return h("add-comment")}),e("body").on("click",".reply-content",function(e){return u()}),e("body").on("focus",".reply-content",function(e){return u()}),e("body").on("blur",".reply-content",function(n){return setTimeout(function(){return e(".comment-reply").css({bottom:"0px"})},500)}),e(".reply-content").on("keyup",function(n){return""===this.value?(e(".btn").attr("disabled","disabled"),e(".btn").css({background:"#999"})):(e(".btn").removeAttr("disabled"),e(".btn").css({background:"#3ec234"}))}),e(".btn").on("click",function(n){var t,i;if(this,(t=e(".reply-content").val())&&""!==t)return i=e(".comment-reply").attr("data-commentid"),i&&e("comment-"+i).length&&e("comment-"+i).find(".add-comment").addClass("active"),c(i,t)})})}.call(this),define("text!mobile/tpl/related_news.ejs",[],function(){
return"<% for(var i=0; i<documents.length; i++) {%>\n  <%\n    var d=documents[i];\n    var related_news_index = start + i;\n    var wuid = $.fn.cookie('wuid') ? $.fn.cookie('wuid'): '';\n    var source_wuid = window.yidian.docinfo.query.wuid;\n    var relativeNews = yidian.docinfo.page_config.relativeNews || {};\n    var doc_app_secClass = relativeNews.docApp2Jump && wuid && source_wuid == wuid  ? 'doc-app-sec' : '';\n    var doc_app_class = relativeNews.docApp && start == 0 && i < relativeNews.docApp || doc_app_secClass ? 'doc-app' : '';\n    var no_img_class = d.docimg ? '' : 'no-image';\n  %>\n\n  <% if(s == 'mb' || s == '2345') {%>\n    <% url = '/article/' + d.docid + '?s=' + s_real + '&appid=' + appid %>\n    <a id='<%=d.docid%>' data-index='<%=related_news_index%>' data-impid='<%=impid%>' class='doc <%=no_img_class%>' href='<%=url%>'>\n    <% if(d.docimg) {%>\n      <img src='<%=d.docimg%>' class='doc-image-small'>\n    <%} %>\n      <div class='doc-content'>\n        <div class='doc-title'><%=d.title%></div>\n        <div class='doc-info'>\n          <span class='doc-info-item doc-info-source'><%=d.source%> |  </span>\n          <span class='doc-info-item'><%=d.date%></span>\n        </div>\n      </div>\n      <div class='clear'></div>\n    </a>\n    <% if(s == 'mb' && related_news_index == ad_position) {%>\n      <div id='mb-ad-rec-<%=ad_position%>' class='mb-ad-rec'></div>\n    <%} %>\n\n  <%} else {\n    var url = '/article/' + d.docid + '?s=' + s_real + '&appid=' + appid + '&wuid=' + wuid;\n    if(related_news_index == 0 && d.image_urls && d.image_urls.length > 2 && doc_app_class) {%>\n      <a id='<%=d.docid%>' data-index='<%=related_news_index%>' data-impid='<%=impid%>' class='doc <%=doc_app_class%> <%=doc_app_secClass%> doc-picture-gallery' href='<%=url%>'>\n        <div class=\"doc-title\"><%=d.title%></div>\n        <div class=\"picture-gallery\">\n          <div class=\"picture-gallery-images\">\n            <div class=\"picture-gallery-images-content\">\n              <%\n                var url1 = \"http://i3.go2yd.com/image.php?url=\"+ d.image_urls[0] +\"&type=thumbnail_400x400\";\n                var url2 = \"http://i3.go2yd.com/image.php?url=\"+ d.image_urls[1] +\"&type=thumbnail_548x386\";\n                var url3 = \"http://i3.go2yd.com/image.php?url=\"+ d.image_urls[2] +\"&type=thumbnail_548x386\";\n              %>\n              <img src=\"<%=url1%>\" style=\"height:<%=others.pictureGalleryHeight%>px\" class=\"js-first\">\n              <img src=\"<%=url2%>\">\n              <img src=\"<%=url3%>\">\n            </div>\n            <span class=\"corner\"><%=d.image_urls.length%></span>\n          </div>\n        </div>\n        <div class='doc-info'>\n          <% if(doc_app_class) {%>\n            <div class='doc-item-wrap'><span class='doc-info-item doc-app'></span></div>\n          <%} %>\n          <span class='doc-info-item doc-info-source'><%=d.source%></span>\n          <span class='doc-info-item'><%=d.date%></span>\n        </div>\n      </a>\n\n    <%} else {\n      var no_img_class = (d.docimg || (d.upload_images && d.upload_images[0])) ? '' : 'no-image';\n      var docimg = d.docimg || (d.upload_images && d.upload_images[0]);%>\n      <a id='<%=d.docid%>' data-index='<%=related_news_index%>' data-impid='<%=impid%>' class='doc <%=doc_app_class%> <%=doc_app_secClass%> <%=no_img_class%>' href='<%=url%>'>\n\n        <% if(d.image_urls && d.image_urls.length > 1){%>\n          <span class='multi-img'></span>\n        <%}else if(d.upload_images && d.duration_str){%>\n          <span class='multi-img'><%=d.duration_str%></span>\n        <%}%>\n\n        <% if(docimg) {%>\n          <img src='<%=docimg%>' class='doc-image-small'>\n        <%} %>\n        <div class='doc-content'>\n          <div class='doc-title'><%=d.title%></div>\n        </div>\n        <div class='doc-info'>\n          <% if(doc_app_class) {%>\n            <div class='doc-item-wrap'><span class='doc-info-item doc-app'></span></div>\n          <%} else%>\n          <span class='doc-info-item doc-info-source'><%=d.source%></span>\n          <span class='doc-info-item'><%=d.date%></span>\n        </div>\n      </a>\n    <%} %>\n\n    <% if(start==0 && i == 1 && relativeNews.docApp) {%>\n      <div id='doc-ifeng' class='js-doc-ifeng'></div>\n    <%} %>\n  <%} %>\n<%} %>\n"}),define("text!mobile/tpl/recommend_video.ejs",[],function(){return"<%\n/*\nrenderData:\n  Array video: list\n  Number start: index\n  String hotst_s:\n  String s_real\n  String appid\n*/\n%>\n\n<% for(var i=0; i<video.length; i++) {%>\n  <% \n    var d = video[i];\n    var index = start + i;\n    var doc_app_class = (index < 2 && window.yidian.docinfo.page_config.recommendVideo && window.yidian.docinfo.page_config.recommendVideo.docApp)? 'doc-app': '';\n    var no_img_class = d.image ? '' : 'no-image';\n    var url = '/article/' + d.docid + '?s=' + s_real + '&appid=' + appid;\n  %>\n\n  <a id='<%=d.docid%>' data-index='<%=index%>' class='doc doc-video <%=doc_app_class%> <%=no_img_class%>' href='<%=url%>'>\n    <span class='multi-img'><%=d.duration_str%></span>\n    <% if(d.image) {%>\n      <img src='http://i1.go2yd.com/image.php?url=<%=encodeURIComponent(d.image)%>&type=thumbnail_200x150' class='doc-image-small'>\n    <%} %>\n    <div class='doc-content'>\n      <div class='doc-title'><%=d.title%></div>\n    </div>\n    <div class='doc-info'>\n      <% if(doc_app_class) {%>\n        <span class='doc-app'>APP</span>\n      <%}%>\n      <span class='doc-info-source'><%=d.source%></span>\n      <% if(d.comment_count !== undefined) {%>\n        <span class='doc-info-item doc-info-comment'><%=d.comment_count || 0%></span>\n      <%} %>\n    </div>\n  </a>\n<%} %>"}),define("text!mobile/tpl/hot_video.ejs",[],function(){return"<%\n/*\nrenderData:\n  Array video: list\n  Number start: index\n  String hotst_s:\n  String s_real\n  String appid\n*/\n%>\n\n<% for(var i=0; i<video.length; i++) {%>\n  <% \n    var d = video[i];\n    var url = '/article/' + d.docid + '?s=' + s_real + '&appid=' + appid;\n    var href = window.yidian.docinfo.page_config.guide_download ? 'javascript:;': url;\n  %>\n\n  <a id='<%=d.docid%>' class='doc-hot-video doc' href='<%=href%>' data-index='<%=i%>' data-type = 'hotvideo'>\n    <div class='img-box'>\n      <span><%=d.duration_str%></span>\n      <img src='http://i1.go2yd.com/image.php?url=<%=encodeURIComponent(d.image)%>&type=thumbnail_485x261' width='100%'>\n    </div>\n    <div class='hotvideo-info'>\n      <% if(window.yidian.docinfo.page_config.guide_download){%>\n        <span class='doc-app'>APP</span>\n      <%}%>\n      <span><%=d.source||''%></span>\n    </div>\n    <div class='doc-content'>\n      <div class='doc-title'><%=d.title%></div>\n    </div>\n  </a>\n<%} %>"}),define("text!mobile/tpl/video_end_recommend.ejs",[],function(){return"<%\n/*\nrenderData:\n  Array video: list\n  Number start: index\n  String hotst_s:\n  String s_real\n  String appid\n*/\n%>\n<% for(var i=0; i<2; i++) {\n    var d = video[i];\n  %>\n  <a class=\"video-end-doc\" data-id='<%=d.docid%>' data-index='<%=i%>'>\n    <img src='http://i1.go2yd.com/image.php?url=<%=encodeURIComponent(d.image)%>&type=thumbnail_200x150' class='doc-image-small'>\n    <span class=\"video-type\"></span>\n    <span class=\"video-duration\"><%=d.duration_str%></span>\n    <p>\n      <% if(window.yidian.docinfo.page_config.guide_download) {%>\n        <span></span>\n      <%} %>\n      <%=d.title%>\n    </p>\n  </a>\n<%} %>"}),function(e){define("ejs",[],function(){return function(){return ejs=function(){function e(n){if("fs"==n)return{};if("path"==n)return{};var t=e.resolve(n),i=e.modules[t];if(!i)throw new Error('failed to require "'+n+'"');return i.exports||(i.exports={},i.call(i.exports,i,i.exports,e.relative(t))),i.exports}return e.modules={},e.resolve=function(n){var t=n,i=n+".js",o=n+"/index.js";return e.modules[i]&&i||e.modules[o]&&o||t},e.register=function(n,t){e.modules[n]=t},e.relative=function(n){return function(t){if("."!=t.substr(0,1))return e(t);var i=n.split("/"),o=t.split("/");i.pop();for(var a=0;a<o.length;a++){var r=o[a];".."==r?i.pop():"."!=r&&i.push(r)}return e(i.join("/"))}},e.register("ejs.js",function(e,n,t){function i(e){return e.substr(1).split("|").reduce(function(e,n){var t=n.split(":"),i=t.shift(),o=t.join(":")||"";return o&&(o=", "+o),"filters."+i+"("+e+o+")"})}function o(e,n,t,i){var o=n.split("\n"),a=Math.max(i-3,0),r=Math.min(o.length,i+3),s=o.slice(a,r).map(function(e,n){var t=n+a+1;return(t==i?" >> ":"    ")+t+"| "+e}).join("\n");throw e.path=t,e.message=(t||"ejs")+":"+i+"\n"+s+"\n\n"+e.message,e}function a(e,n){var t=l(c(n),e);return d(e)||(t+=".ejs"),t}var r=t("./utils"),s=t("path"),c=s.dirname,d=s.extname,l=s.join,u=t("fs"),p=u.readFileSync,f=n.filters=t("./filters"),m={};n.clearCache=function(){m={}};var h=(n.parse=function(e,t){var t=t||{},o=t.open||n.open||"<%",r=t.close||n.close||"%>",s=t.filename,c=!1!==t.compileDebug,d="";d+="var buf = [];",!1!==t._with&&(d+="\nwith (locals || {}) { (function(){ "),d+="\n buf.push('";for(var l=1,u=!1,f=0,m=e.length;f<m;++f){var h=e[f];if(e.slice(f,o.length+f)==o){f+=o.length;var g,v,y=(c?"__stack.lineno=":"")+l;switch(e[f]){case"=":g="', escape(("+y+", ",v=")), '",++f;break;case"-":g="', ("+y+", ",v="), '",++f;break;default:g="');"+y+";",v="; buf.push('"}var _=e.indexOf(r,f);if(_<0)throw new Error('Could not find matching close tag "'+r+'".');var w=e.substring(f,_),b=f,x=null,C=0;if("-"==w[w.length-1]&&(w=w.substring(0,w.length-2),u=!0),0==w.trim().indexOf("include")){var k=w.trim().slice(7).trim();if(!s)throw new Error("filename option is required for includes");var A=a(k,s);x=p(A,"utf8"),x=n.parse(x,{filename:A,_with:!1,open:o,close:r,compileDebug:c}),d+="' + (function(){"+x+"})() + '",w=""}for(;~(C=w.indexOf("\n",C));)C++,l++;":"==w.substr(0,1)&&(w=i(w)),w&&(w.lastIndexOf("//")>w.lastIndexOf("\n")&&(w+="\n"),d+=g,d+=w,d+=v),f+=_-b+r.length-1}else"\\"==h?d+="\\\\":"'"==h?d+="\\'":"\r"==h||("\n"==h?u?u=!1:(d+="\\n",l++):d+=h)}return!1!==t._with?d+="'); })();\n} \nreturn buf.join('');":d+="');\nreturn buf.join('');",d},n.compile=function(e,t){t=t||{};var i=t.escape||r.escape,a=JSON.stringify(e),s=!1!==t.compileDebug,c=t.client,d=t.filename?JSON.stringify(t.filename):"undefined";e=s?["var __stack = { lineno: 1, input: "+a+", filename: "+d+" };",o.toString(),"try {",n.parse(e,t),"} catch (err) {","  rethrow(err, __stack.input, __stack.filename, __stack.lineno);","}"].join("\n"):n.parse(e,t),t.debug&&console.log(e),c&&(e="escape = escape || "+i.toString()+";\n"+e);try{var l=new Function("locals, filters, escape, rethrow",e)}catch(e){throw"SyntaxError"==e.name&&(e.message+=t.filename?" in "+d:" while compiling ejs"),e}return c?l:function(e){return l.call(this,e,f,i,o)}});n.render=function(e,n){var t,n=n||{};if(n.cache){if(!n.filename)throw new Error('"cache" option requires "filename".');t=m[n.filename]||(m[n.filename]=h(e,n))}else t=h(e,n);return n.__proto__=n.locals,t.call(n.scope,n)},n.renderFile=function(e,t,i){var o=e+":string";"function"==typeof t&&(i=t,t={}),t.filename=e;var a;try{a=t.cache?m[o]||(m[o]=p(e,"utf8")):p(e,"utf8")}catch(e){return void i(e)}i(null,n.render(a,t))},n.__express=n.renderFile,t.extensions?t.extensions[".ejs"]=function(e,n){n=n||e.filename;var t={filename:n,client:!0},i=u.readFileSync(n).toString(),o=h(i,t);e._compile("module.exports = "+o.toString()+";",n)}:t.registerExtension&&t.registerExtension(".ejs",function(e){return h(e,{})})}),e.register("filters.js",function(e,n,t){n.first=function(e){return e[0]},n.last=function(e){return e[e.length-1]},n.capitalize=function(e){return e=String(e),e[0].toUpperCase()+e.substr(1,e.length)},n.downcase=function(e){return String(e).toLowerCase()},n.upcase=function(e){return String(e).toUpperCase()},n.sort=function(e){return Object.create(e).sort()},n.sort_by=function(e,n){return Object.create(e).sort(function(e,t){return e=e[n],t=t[n],e>t?1:e<t?-1:0})},n.size=n.length=function(e){return e.length},n.plus=function(e,n){return Number(e)+Number(n)},n.minus=function(e,n){return Number(e)-Number(n)},n.times=function(e,n){return Number(e)*Number(n)},n.divided_by=function(e,n){return Number(e)/Number(n)},n.join=function(e,n){return e.join(n||", ")},n.truncate=function(e,n,t){return e=String(e),e.length>n&&(e=e.slice(0,n),t&&(e+=t)),e},n.truncate_words=function(e,n){var e=String(e);return e.split(/ +/).slice(0,n).join(" ")},n.replace=function(e,n,t){return String(e).replace(n,t||"")},n.prepend=function(e,n){return Array.isArray(e)?[n].concat(e):n+e},n.append=function(e,n){return Array.isArray(e)?e.concat(n):e+n},n.map=function(e,n){return e.map(function(e){return e[n]})},n.reverse=function(e){return Array.isArray(e)?e.reverse():String(e).split("").reverse().join("")},n.get=function(e,n){return e[n]},n.json=function(e){return JSON.stringify(e)}}),e.register("utils.js",function(e,n,t){n.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}}),e("ejs")}(),e.ejs=ejs}.apply(e,arguments)})}(this),function(){define("news",["zepto","query","util","log","banner","download","text!mobile/tpl/related_news.ejs","text!mobile/tpl/recommend_video.ejs","text!mobile/tpl/hot_video.ejs","text!mobile/tpl/video_end_recommend.ejs","ejs"],function(e,n,t,i,o,a,r,s,c,d){var l,u,p,f,m,h,g,v,y,_,w,b,x,C,k,A,E,j,O,S,N,D,T,P,I;if(v=yidian.docinfo.doc.docid,T=yidian.docinfo.query.s||"",P=yidian.docinfo.query.s_real||"",u=yidian.docinfo.query.appid||"",p=document.documentElement.getBoundingClientRect().width-30,k=.585*p,E=a.redirectDownload,l=yidian.docinfo.abtest||{},C=window.yidian.docinfo.page_config,x={},b=function(n){var t,i,o,a,r;for(n=n||[],o=[],t=e(".js-doc-ifeng .doc-title").text(),a=0,r=n.length;a<r;a++)i=n[a],!x[i.docid]&&i.title&&t!==i.title&&(o.push(i),x[i.docid]=!0);return o},w=!1,j=0,0,y=0,I=0,D=function(i,a){return e(window).trigger("renderRelatedNews"),e(document).unbind("touchend"),n.getRelatedNews(v,i,a,function(n){var s,c,d,l,p,f,m,h,g,v,_,x,C,A;if(n&&"success"===n.status&&(n.documents=b(n.documents)),"success"===n.status&&n.documents.length>0&&e(".banner.planA").length)if(0===j){for(e(".banner.planA").length&&(I=3),m=Math.min(n.documents.length,I),c=[],f=v=0,A=m-1;0<=A?v<=A:v>=A;f=0<=A?++v:--v)c[f]=n.documents[f];o.renderPlanA(c),d=m,y=m}else d=0;else e(".banner.planA").length&&(e(".banner").addClass("plan-default plan-default1").removeClass("planA"),e(".banner").html('<div class="leftSide"> <div class="img logo"></div><h3 class="title"></h3><h4 class="subTitle"></h4></div><span class="greenBtn"></span>').css("display","block")),d=0;if(!("success"===n.status&&n.documents.length>d))return 0!==j?(e(".news-list .loading").remove(),window.yidian.docinfo.page_config.guide_download?(e(".news-list .doc").last().addClass("no-border"),e(".news-list").append("<p class='scroll-download-tip no-data'><span></span></p>"),e(".no-data").css({display:"block"}).animate({opacity:"1"},400)):e(".news-list").append("<p class='has-no-data'></p>")):e(".relative-news").hide();if(l=n.documents.slice(d),0===i&&n.pop_news_docs&&n.pop_news_docs.length>0)for(f=_=1;_>=0;f=--_)n.pop_news_docs[f]&&l.unshift(n.pop_news_docs[f]);for(x=0,C=l.length;x<C;x++)g=l[x],g.duration&&(g.duration_str=t.handleDuration(g.duration));return h={impid:n.impid,documents:l,s:T,s_real:P,appid:u,start:i,others:{pictureGalleryHeight:k}},p=ejs.render(r,h),j+=a,w=!1,e(".news-list .loading").remove(),j===Number(2*a-2-I)&&window.yidian.docinfo.page_config.guide_download&&(e(".news-list").append("<p class='scroll-download-tip scroll-download-tipA'><span>APP</span></p>"),e(".scroll-download-tipA").prev(".doc").addClass("no-border")),j===Number(3*a-2-I)&&window.yidian.docinfo.page_config.guide_download&&(e(".news-list").append("<p class='scroll-download-tip scroll-download-tipB'><span>~</span></p>"),e(".scroll-download-tipB").prev(".doc").addClass("no-border")),e(".news-list").append(p),e(".news-list").append("<div class='drop-up'></div>"),e(".relative-news").show(),p.indexOf("js-doc-ifeng")>-1?(s=l.map(function(e){return e.title}),getRelateDoc("doc-ifeng",{title:yidian.docinfo.doc.title,RelateTitles:s,category:yidian.docinfo.doc.category})):void 0})},m=function(n,t){var i,o;return t.preventDefault(),n.data("index"),i=n.attr("id"),o=e.fn.cookie("wuid")?e.fn.cookie("wuid"):"",n.hasClass("doc-app-sec")?E("doc-app-sec",{docid:i}):n.hasClass("doc-app")?n.hasClass("doc-video")?E("doc-video",{docid:i}):E("doc-app",{docid:i}):window.location.href="/article/"+i+"?s="+P+"&appid="+u+"&wuid="+o},g=function(){return e(document).bind("touchmove",function(n){var t,i;if(t=e(window).scrollTop(),i=e(window).height(),e(document).height()-100<i+t&&0!==j&&!w)return w=!0,e(".news-list .drop-up").removeClass(".drop-up").addClass("loading").text("..."),e(document).bind("touchend",function(e){if(w)return D(j,5)})})},h=function(){return e(window).on("scroll",function(){var n;return n=e(window).height(),e(".news-list .doc").each(function(){if(e(this).offset().top<=e("body").scrollTop()+n&&e(this).offset().top+e(this).height()>=e("body").scrollTop())return e(window).trigger("relatedNewsExposured",this)})})},f=function(){return e(".news-list").on("click",".js-doc-ifeng",function(){return webmonitor.sendEventLog("ifeng&yidian:doc-ifeng","click"),i.sendLogOffline({action_method:"CLICK_DOC",action_source:{page:"PageWapDocument",card:"CardWapRelatedDoc"},context:{source:"fenghuang",env:"yidian"}})}),e(window).on("scroll",function(){var n;return n=e(window).height(),e(".js-doc-ifeng").each(function(){var e;if(e=this.getBoundingClientRect(),this.innerHTML&&e.top<=n&&e.bottom>=0&&!this._exposeLogSended)return webmonitor.sendEventLog("ifeng&yidian:doc-ifeng","expose"),this._exposeLogSended=!0,i.sendLogOffline({action_method:"VIEW_DOC",action_source:{page:"PageWapDocument",card:"CardWapRelatedDoc"},context:{source:"fenghuang",env:"yidian"}})})})},N=function(){return n.getRecommendVideo(v,function(n){var i,o,a,r,c,l,p,f;if(n&&"success"===n.status&&n.recommend_video&&n.recommend_video.length){for(n.recommend_video.length=Math.min(n.recommend_video.length,10),f=n.recommend_video,l=0,p=f.length;l<p;l++)c=f[l],c.duration_str=t.handleDuration(c.duration);return r={video:n.recommend_video,start:0,s_real:P,appid:u},i=ejs.render(s,r),e(".video-list").html(i),e(".recommend-video").show(),o=ejs.render(d,r),e(".video-end-doclist").html(o),1===n.recommend_video.length?e(".video-end-doclist").css("width","100%"):(a=4.14,e(".video-end-doclist").css("width",a+"rem")),h()}})},S=function(i){return n.getHotVideo(i,v,function(n){var i,a,r,s,d,l;if(n&&"success"===n.status&&n.documents&&n.documents.length){for(s=n.documents.filter(function(e){return e.image}),d=0,l=s.length;d<l;d++)r=s[d],r.duration_str=t.handleDuration(r.duration);e(".banner.planA.video-bottom-banner").length&&s.length>=5?(o.renderPlanA(s.slice(0,3)),s=s.slice(3)):o.renderPlanA([]),s=s.slice(0,4),s.length%2!=0&&(s=s.slice(0,2*Math.floor(s.length/2))),a={video:s,s:T,s_real:P,appid:u},s.length&&(i=ejs.render(c,a),e(".hot-video-list").html(i),e("#hot-video-wrapper").show())}else o.renderPlanA([]);return e(".relative-channel").show(),h()})},O="<div class='relative-news-wrapper'><div class='relative-news'><h4></h4><div class='news-list'></div></div></div>",yidian.docinfo.page_config.modules.indexOf("relativeNews")>-1){if(e("#relative-news-container").html(O),"success"===l.status&&e(".banner.planA").length){if(yidian.docinfo.abtest.NEWS_COPY_TEST&&1===yidian.docinfo.abtest.NEWS_COPY_TEST.newscopy)return;D(0,6)}else e("#relative-news-container").length&&D(0,3);e(".news-list").on("click",".scroll-download-tip",function(){return E(e(this).hasClass("scroll-download-tipA")?"scroll-download-tipA":e(this).hasClass("scroll-download-tipB")?"scroll-download-tipB":"scroll-download-tipC")}),e(".news-list").on("click",".doc",function(n){if(!e(this).closest(".js-doc-ifeng").length)return m(e(this),n)}),e(".relative-news").length&&g(),e(".news-list").length&&h(),C.relativeNews&&C.relativeNews.docApp&&f()}return A="<div class='recommend-video'> <div class='video-list news-list'></div> "+(yidian.docinfo.page_config.guide_download?'<div class="more-video-btn"></div>':"")+" </div>",_="<h4></h4> <div class='hot-video-list news-list'></div> <h4 class='recommend-h4'></h4>",yidian.docinfo.page_config.modules.indexOf("recommendVideo")>-1&&(e("#recommend-video-container").html(A),N(),e(".news-list").on("click",".doc",function(n){return m(e(this),n)}),e(".more-video-btn").click(function(){return E("video-more")})),yidian.docinfo.page_config.modules.indexOf("hotVideo")>-1&&e("#hot-video-wrapper").length&&(e("#hot-video-wrapper").html(_),S(7),e(".hot-video-list").on("click",".doc-hot-video",function(n){var t;return t=e(this).attr("id"),E("doc-hot-video",{docid:t})})),{renderRecommendVideo:N,renderRelatedNews:D,bindNewsClickEvent:m,bindNewsPullUpEvent:g,bindNewsExposureEvent:h}})}.call(this),define("text!mobile/tpl/replies.ejs",[],function(){return"<%\n/*\nrenderData:\n  Array replies: \n  String comment_id: id\n  Object repliers: repliy_idnickname\n*/\n%>\n\n<% for(var i=0; i<replies.length; i++) {%>\n  <% var reply = replies[i]%>\n  <% if(reply.reply_to == comment_id) {%>\n    <p id='reply-<%=reply.reply_id%>' class='reply-item' data-replyid='<%=reply.reply_id%>' data-replyname='<%=reply.nickname%>'> \n      <span class='reply-name'><%=reply.nickname%>: </span>\n      <span class='reply-comment'><%=reply.comment%></span>\n    <% if(reply.mine) {%>\n      <a class='remove-reply'></a>\n    <%} %>\n    </p>\n\n  <%} else {%>\n    <p id='reply-<%=reply.reply_id%>' class='reply-item' data-replyid='<%=reply.reply_id%>' data-replyname='<%=reply.nickname%>'> \n      <span class='reply-name'><%=reply.nickname%>: </span>\n      <span></span>\n      <% var reply_name =  repliers[reply.reply_to] || ''%>\n      <span class='reply-name'><%=reply_name%>: </span>\n      <span class='reply-comment'><%=reply.comment%></span>\n    <% if(reply.mine) {%>\n      <a class='remove-reply'></a>\n    <%} %>\n    </p>\n  <%} %>\n<%} %>"}),function(){define("relative_channel",["zepto"],function(e){var n,t,i,o,a,r,s;return yidian.docinfo.query.s||"",s=yidian.docinfo.query.s_real||"",n=yidian.docinfo.query.appid||"",i=function(n,t,i,o){var a;return a="/home/q/news_list_for_channel?channel_id="+n+"&cstart="+t+"&cend="+i+"&infinite=false&refresh=1",e.get(a,function(e){return o&&o(e)})},o=function(n,t,i,o){var a;return a="/home/q/news_list_for_keyword?display="+n+"&cstart="+t+"&cend="+i,e.get(a,function(e){return o&&o(e)})},r=function(n){var t,i,o,a,r,s,c,d;if(a="",n&&"success"===n.status&&n.result){for(n.result=n.result.filter(function(e){return!(!e.docid||!e.title)}),o=n.result.slice(0,2),s=c=0,d=o.length;c<d;s=++c)t=o[s],i=t.image?"":"doc-no-image",r=t.image?"<img src='http://i1.go2yd.com/image.php?url="+t.image+"&type=thumbnail_200x150' class='doc-image-small'>":"",a+="<a id='relative-channel-"+t.docid+"' data-index='"+s+"' class='doc top-1px "+i+"'> "+r+" <div class='doc-content'> <div class='doc-title'>"+t.title+"</div> </div> <div class='doc-info'> <span class='doc-info-item doc-info-source'>"+(t.source||"")+"</span> <span class='doc-info-item'>"+(t.comment_count||0)+"</span> </div> </a>";return a="<div class='relative-channel-news'>"+a+"</div>",e(".relative-channel.hasrelatedchannelnews").append(a)}},e(".relative-channel.hasrelatedchannelnews").length&&(t=yidian.docinfo.doc.bottom_channels[0].id,a=yidian.docinfo.doc.bottom_channels[0].name,t?i(t,0,5,r):o(a,0,5,r)),e(".relative-channel").on("click",function(e){return window.location.href="/channel/"+yidian.docinfo.doc.bottom_channels[0].id+"?s="+s+"&appid="+n})})}.call(this),function(){define("relative_joke",["zepto","banner","util"],function(e,n,t){var i,o,a,r,s,c,d,l,u,p,f,m,h,g,v,y,_;if(y=0,r=15,c=!1,s=yidian.docinfo.doc.bottom_channels?yidian.docinfo.doc.bottom_channels[0].id:"u12131",m=yidian.docinfo.doc.keywords?yidian.docinfo.doc.keywords[0]:"",p=!1,_=e(window).height(),u=yidian.docinfo.page_config.guide_download,g={},g[yidian.docinfo.doc.docid]=!0,h=function(e){var n,t,i,o;for(e=e||[],t=[],i=0,o=e.length;i<o;i++)n=e[i],g[n.docid]||(t.push(n),g[n.docid]=!0);return t},i=yidian.docinfo.abtest||{},f="<% var up = doc.up || 0; var down = doc.down || 0; var like = doc.like || 0; var comment_count = doc.comment_count || 0; var winWidth =  $(window).width(); var jokeImg = ''; var jokeHeight = 0; if(doc.image_urls && doc.image_urls.length>0){ jokeImg = doc.image_urls[0]; if(doc.img_scores && doc.img_scores[jokeImg]){ jokeHeight = Number(winWidth/doc.img_scores[jokeImg].w*doc.img_scores[jokeImg].h) } } %> <li id='<%=doc.docid%>' data-impid='<%=doc.impid%>' data-index='<%=index%>'> <%if(comment_count>10 && hasLayer){%> <div class='summary-has-vague'> <div class='clear-summary'><%=doc.summary%></div> <div class='vague-summary'><%=doc.summary%><%=doc.summary%><%=doc.summary%><%=doc.summary%><%=doc.summary%><%=doc.summary%></div> <div class='summary-layer'><span class='summary-layer-link'></span></div> </div> <%}else{%> <p><%=doc.summary%></p> <%if(jokeImg){%> <%if(hasLayer){%> <div class='related-joke-img' style='max-height:<%=winWidth%>px'> <img src='http://i1.go2yd.com/image.php?url=<%=jokeImg%>' data='<%=jokeHeight%>'/> <%if(jokeHeight > winWidth){%> <span></span> <%}%> </div> <%}else{%> <div class='related-joke-img'> <img src='http://i1.go2yd.com/image.php?url=<%=jokeImg%>' data='<%=jokeHeight%>'/> </div> <%}%> <%}%> <%}%> <div class='joke-info-wrapper'  id='<%=doc.docid%>'> <span class='joke-up'><%=up%></span> <span class='joke-down'><%=down%></span> <span class='joke-like'><%=like%></span> <span class='joke-comment-num'><%=comment_count%></span> </div> </li>",m&&(c=!0),d=function(n,t,i,o){var a;return a="/home/q/news_list_for_channel?channel_id="+n+"&cstart="+t+"&cend="+i+"&infinite=false&refresh=1",e.ajax({url:a,timeout:1e4,success:function(e){return o&&o(e)},error:function(e,n,t){return console.log("statGetJokeFail front-end error("+n+")"),o({status:"failed",reason:"ajaxtimeout"})}})},l=function(n,t,i,o){var a;return a="/home/q/news_list_for_keyword?display="+n+"&cstart="+t+"&cend="+i+"&word_type=tag&search=true&ctype=joke&ctype_type=card_type",e.ajax({url:a,timeout:1e4,success:function(e){return o&&o(e)},error:function(e,n,t){return console.log("statGetJokeFail front-end error("+n+")"),o({status:"failed",reason:"ajaxtimeout"})}})},v=function(n){var t,i,o,s,c,d;if(i="",n&&"success"===n.status&&n.result){if(n.result=h(n.result),n.result.length){for(n.result=n.result.filter(function(e){return!(!e.docid||!e.title)}),d=n.result,o=s=0,c=d.length;s<c;o=++s)t=d[o],i+=ejs.render(f,{doc:t,hasLayer:u,index:o});return e(".joke-other-list").append(i).show(),0===y&&e(".joke-list-tip").show(),y+=15,r+=15,p=!1,a(),e(".joke-tip").hide()}return p=!0,e(".joke-tip").hide(),e(".no-more-joke").show()}return e(".joke-tip").hide(),e(".error-joke").show()},e(".joke-other-list").length&&(c?l(m,y,r,v):d(s,y,r,v)),3===i.Download_Banner_Test.download_banner_test&&e(".joke-banner.planA").length&&d("u5846",0,20,function(e){var i,o,a,r,s,c;if(e&&"success"===e.status){for(e.result=e.result.filter(function(e){return e.title&&e.docid}),c=e.result,r=0,s=c.length;r<s;r++)a=c[r],a.date=t.formate_date(a.date);return o=3,i=Math.round(Math.random()*(e.result.length-o)),e.result=e.result.slice(i,i+o),n.renderPlanA(e.result)}}),a=function(){var n;return n=function(){var n;if(n=e("body").scrollTop(),e(document).height()-200<_+n&&!p)return p=!0,e(".joke-tip").hide(),e(".loading-joke").show(),c?l(m,y,r,v):d(s,y,r,v)},e(window).off("scroll",n).on("scroll",n)},o=function(){return e(window).on("scroll",function(){return _=e(window).height(),e(".joke-other-list li").each(function(){if(e(this).offset().top<=e("body").scrollTop()+_&&e(this).offset().top+e(this).height()>=e("body").scrollTop())return e(window).trigger("relatedNewsExposured",this)})})},e(".error-joke").on("click",function(){return e(".joke-tip").hide(),e(".loading-joke").show(),c?l(m,y,r,v):d(s,y,r,v)}),e(".joke-other-list").length)return o()})}.call(this),function(){var e,n;0!==yidian.docinfo.page_config.page_format||document.referrer||!yidian.docinfo.is_weixin||yidian.docinfo.doc.is_video||(history.state&&"pageDetail"===history.state.page||(n="/?s=_whp_",e=location.href,history.replaceState({page:"backToIndex"},"",n),history.pushState({page:"pageDetail"},"",e)),window.onpopstate=function(e){if(e.state&&"backToIndex"===e.state.page)return location.reload()})}.call(this),define("back_to_Index",function(){}),function(){require(["zepto","query","log_article","ad_article","util","banner","image","download","share","personal_point","hot_comments","news","text!mobile/tpl/replies.ejs","text!mobile/tpl/related_news.ejs","zepto_cookie","ejs","relative_channel","relative_joke","back_to_Index"],function(e,n,t,i,o,a,r,s,c,d,l,u,p,f){var m,h,g,v,y,_,w;return yidian.docinfo.query.s||"",_=yidian.docinfo.query.s_real||"",m=yidian.docinfo.query.appid||"",yidian.docinfo.doc.docid,v=yidian.docinfo.page_config||{},yidian.docinfo.abtest||{},y=s.redirectDownload,yidian.docinfo.is_imedia&&o.loadScript("//tag.yidianzixun.com/components?c=index&auto=0",function(){var e;try{return window.$TagComponent.render()}catch(n){return e=n,console.error(e)}}),"video"!==yidian.docinfo.doc.ctype&&"video_live"!==yidian.docinfo.doc.ctype||"https:"!==location.protocol||(location.href=location.href.replace(/^https:/,"http:")),e(".article-read-more").length&&e(".container #js-content").height()>1540&&(e(".container").addClass("collapse"),e(".article-read-more").show(),e(".article-read-more").on("click",function(n){return e(this).hide(),e(".container").removeClass("collapse")})),e(".meta .imedia").on("click",function(e){if(yidian.docinfo.related_wemedia.id&&v.guide_channel)return window.location.href="/channel/m"+yidian.docinfo.related_wemedia.id+"?s="+_+"&appid="+m}),e(".meta .imedia-link").on("click",function(e){return y("doc-subscribe-channel")}),g=!1,e(".video-own video").hide(),e(".video-own").click(function(){if(!g)return e(".video-own video").show(),e(".video-play").addClass("video-loading"),e(this).find("video")[0].play()}),e(".video-own video").on("ended",function(){if(e(".video-end-doclist a.video-end-doc").length)return e(".video-end-show").show()}),e(".video-end-replay").on("click",function(){return e(".video-end-show").hide(),e(".video-own video").show(),e(".video-own video")[0].play(),e(".video-cover").hide(),e(".video-play").hide()}),e("video").on("playing",function(){return e(".video-cover").hide(),e(".video-play").hide()}),e(".video-applink").click(function(){return y("video-to-app")}),e(".video-end-doclist").on("click",".video-end-doc",function(){var n;return n=e(this).attr("data-id"),v.guide_download?y("doc-video",{docid:n}):window.location.href="/article/"+n+"?s="+_+"&appid="+m}),e(".video-switchbtn").click(function(){return e(".container").hasClass("video-show-hide")?e(".container").removeClass("video-show-hide"):e(".container").addClass("video-show-hide")}),w=function(e){var t,i,o,a;return o=e.parent(".joke-info-wrapper").attr("id"),a=Number(e.text()),t=e.parent().find(".joke-down"),e.hasClass("active")?e.removeClass("active").text(a-=1):(e.addClass("active").text(a+=1),t&&t.hasClass("active")&&(i=Number(t.text()),t.removeClass("active").text(i-=1))),n.addUp(o)},h=function(e){var t,i,o,a;return t=e.parent(".joke-info-wrapper").attr("id"),i=Number(e.text()),o=e.parent().find(".joke-up"),e.hasClass("active")?e.removeClass("active").text(i-=1):(e.addClass("active").text(i+=1),o&&o.hasClass("active")&&(a=Number(o.text()),o.removeClass("active").text(a-=1))),n.addDown(t)},setTimeout(function(){return e(".page-joke").on("click",".joke-down",function(){var n;return n=e(this),h(n)}),
e(".page-joke").on("click",".joke-up",function(){var n;return n=e(this),w(n)})},100),e(".joke-other-list").on("click",".joke-like",function(){var n;if(v.guide_download)return n=e(this).closest(".joke-info-wrapper").attr("id"),y("joke-like",{docid:n})}),e(".joke-other-list").on("click",".joke-comment-num",function(){var n;if(v.guide_download)return n=e(this).closest(".joke-info-wrapper").attr("id"),y("joke-comment",{docid:n})}),e(".joke-other-list").on("click",".related-joke-img span, .summary-layer",function(){var n;return n=e(this).parent().parent().find(".joke-info-wrapper").attr("id"),y("joke-relative",{docid:n})}),e(".joke-info-wrapper").on("click",".joke-like, .joke-comment-num",function(){var n;if(v.guide_download)return n=e(this).closest(".joke-info-wrapper").attr("id"),y("joke-like",{docid:n})})})}.call(this),define("mobile/build/article",function(){});